var Recorder={swfObject:null,_callbacks:{},_events:{},_initialized:!1,options:{},initialize:function(e){this.options=e||{},this.options.flashContainer||this._setupFlashContainer(),this.bind("initialized",function(){Recorder._initialized=!0,e.initialized()}),this.bind("showFlash",this.options.onFlashSecurity||this._defaultOnShowFlash),this._loadFlash()},clear:function(){Recorder._events={}},record:function(e){e=e||{},this.clearBindings("recordingStart"),this.clearBindings("recordingProgress"),this.clearBindings("recordingCancel"),this.bind("recordingStart",this._defaultOnHideFlash),this.bind("recordingCancel",this._defaultOnHideFlash),this.bind("recordingCancel",this._loadFlash),this.bind("recordingStart",e.start),this.bind("recordingProgress",e.progress),this.bind("recordingCancel",e.cancel),this.flashInterface().record()},stop:function(){return this.flashInterface()._stop()},play:function(e){e=e||{},this.clearBindings("playingProgress"),this.bind("playingProgress",e.progress),this.bind("playingStop",e.finished),this.flashInterface()._play()},upload:function(e){e.audioParam=e.audioParam||"audio",e.params=e.params||{},this.clearBindings("uploadSuccess"),this.bind("uploadSuccess",function(t){e.success(Recorder._externalInterfaceDecode(t))}),this.flashInterface().upload(e.url,e.audioParam,e.params)},audioData:function(){return this.flashInterface().audioData().split(";")},request:function(e,t,n,r,o){var i=this.registerCallback(o);this.flashInterface().request(e,t,n,r,i)},clearBindings:function(e){Recorder._events[e]=[]},bind:function(e,t){Recorder._events[e]||(Recorder._events[e]=[]),Recorder._events[e].push(t)},triggerEvent:function(e,t,n){Recorder._executeInWindowContext(function(){for(var r in Recorder._events[e])Recorder._events[e][r]&&Recorder._events[e][r].apply(Recorder,[t,n])})},triggerCallback:function(e,t){Recorder._executeInWindowContext(function(){Recorder._callbacks[e].apply(null,t)})},registerCallback:function(e){var t="CB"+parseInt(999999*Math.random(),10);return Recorder._callbacks[t]=e,t},flashInterface:function(){return this.swfObject?this.swfObject.record?this.swfObject:this.swfObject.children[3].record?this.swfObject.children[3]:void 0:null},_executeInWindowContext:function(e){window.setTimeout(e,1)},_setupFlashContainer:function(){this.options.flashContainer=document.createElement("div"),this.options.flashContainer.setAttribute("id","recorderFlashContainer"),this.options.flashContainer.setAttribute("style","position: fixed; left: -9999px; top: -9999px; width: 230px; height: 140px; margin-left: 10px; border-top: 6px solid rgba(128, 128, 128, 0.6); border-bottom: 6px solid rgba(128, 128, 128, 0.6); border-radius: 5px 5px; padding-bottom: 1px; padding-right: 1px;"),document.body.appendChild(this.options.flashContainer)},_clearFlash:function(){var e=this.options.flashContainer.children[0];e&&this.options.flashContainer.removeChild(e)},_loadFlash:function(){this._clearFlash();var e=document.createElement("div");e.setAttribute("id","recorderFlashObject"),this.options.flashContainer.appendChild(e),swfobject.embedSWF(this.options.swfSrc,"recorderFlashObject","231","141","10.1.0",void 0,void 0,{allowscriptaccess:"always"},void 0,function(e){e.success?(Recorder.swfObject=e.ref,Recorder._checkForFlashBlock()):Recorder._showFlashRequiredDialog()})},_defaultOnShowFlash:function(){var e=Recorder.options.flashContainer;e.style.left=(window.innerWidth||document.body.offsetWidth)/2-115+"px",e.style.top=(window.innerHeight||document.body.offsetHeight)/2-70+"px"},_defaultOnHideFlash:function(){var e=Recorder.options.flashContainer;e.style.left="-9999px",e.style.top="-9999px"},_checkForFlashBlock:function(){window.setTimeout(function(){Recorder._initialized||Recorder.triggerEvent("showFlash")},500)},_showFlashRequiredDialog:function(){Recorder.options.flashContainer.innerHTML="<p>Adobe Flash Player 10.1 or newer is required to use this feature.</p><p><a href='http://get.adobe.com/flashplayer' target='_top'>Get it on Adobe.com.</a></p>",Recorder.options.flashContainer.style.color="white",Recorder.options.flashContainer.style.backgroundColor="#777",Recorder.options.flashContainer.style.textAlign="center",Recorder.triggerEvent("showFlash")},_externalInterfaceDecode:function(e){return e.replace(/%22/g,'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%")}};if(void 0==swfobject)var swfobject=function(){function e(){if(!B){try{var e=x.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(t){return}B=!0;for(var n=M.length,r=0;n>r;r++)M[r]()}}function t(e){B?e():M[M.length]=e}function n(e){if(typeof H.addEventListener!=A)H.addEventListener("load",e,!1);else if(typeof x.addEventListener!=A)x.addEventListener("load",e,!1);else if(typeof H.attachEvent!=A)w(H,"onload",e);else if("function"==typeof H.onload){var t=H.onload;H.onload=function(){t(),e()}}else H.onload=e}function r(){j?o():i()}function o(){var e=x.getElementsByTagName("body")[0],t=m(E);t.setAttribute("type",F);var n=e.appendChild(t);if(n){var r=0;!function(){if(typeof n.GetVariable!=A){var o=n.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),X.pv=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)])}else if(10>r)return r++,setTimeout(arguments.callee,10),void 0;e.removeChild(t),n=null,i()}()}else i()}function i(){var e=N.length;if(e>0)for(var t=0;e>t;t++){var n=N[t].id,r=N[t].callbackFn,o={success:!1,id:n};if(X.pv[0]>0){var i=g(n);if(i)if(!v(N[t].swfVersion)||X.wk&&X.wk<312)if(N[t].expressInstall&&s()){var u={};u.data=N[t].expressInstall,u.width=i.getAttribute("width")||"0",u.height=i.getAttribute("height")||"0",i.getAttribute("class")&&(u.styleclass=i.getAttribute("class")),i.getAttribute("align")&&(u.align=i.getAttribute("align"));for(var d={},p=i.getElementsByTagName("param"),h=p.length,f=0;h>f;f++)"movie"!=p[f].getAttribute("name").toLowerCase()&&(d[p[f].getAttribute("name")]=p[f].getAttribute("value"));l(u,d,n,r)}else c(i),r&&r(o);else y(n,!0),r&&(o.success=!0,o.ref=a(n),r(o))}else if(y(n,!0),r){var m=a(n);m&&typeof m.SetVariable!=A&&(o.success=!0,o.ref=m),r(o)}}}function a(e){var t=null,n=g(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=A)t=n;else{var r=n.getElementsByTagName(E)[0];r&&(t=r)}return t}function s(){return!$&&v("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function l(e,t,n,r){$=!0,R=r||null,k={success:!1,id:n};var o=g(n);if(o){"OBJECT"==o.nodeName?(S=u(o),b=null):(S=o,b=n),e.id=O,(typeof e.width==A||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==A||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),x.title=x.title.slice(0,47)+" - Flash Player Installation";var i=X.ie&&X.win?"ActiveX":"PlugIn",a="MMredirectURL="+encodeURI(H.location).toString().replace(/&/g,"%26")+"&MMplayerType="+i+"&MMdoctitle="+x.title;if(typeof t.flashvars!=A?t.flashvars+="&"+a:t.flashvars=a,X.ie&&X.win&&4!=o.readyState){var s=m("div");n+="SWFObjectNew",s.setAttribute("id",n),o.parentNode.insertBefore(s,o),o.style.display="none",!function(){4==o.readyState?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}d(e,t,n)}}function c(e){if(X.ie&&X.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",!function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=m("div");if(X.win&&X.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(E)[0];if(n){var r=n.childNodes;if(r)for(var o=r.length,i=0;o>i;i++)1==r[i].nodeType&&"PARAM"==r[i].nodeName||8==r[i].nodeType||t.appendChild(r[i].cloneNode(!0))}}return t}function d(e,t,n){var r,o=g(n);if(X.wk&&X.wk<312)return r;if(o)if(typeof e.id==A&&(e.id=n),X.ie&&X.win){var i="";for(var a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?i+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(i+=" "+a+'="'+e[a]+'"'));var s="";for(var l in t)t[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+t[l]+'" />');o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+s+"</object>",U[U.length]=e.id,r=g(e.id)}else{var c=m(E);c.setAttribute("type",F);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?c.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&c.setAttribute(u,e[u]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&p(c,d,t[d]);o.parentNode.replaceChild(c,o),r=c}return r}function p(e,t,n){var r=m("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function h(e){var t=g(e);t&&"OBJECT"==t.nodeName&&(X.ie&&X.win?(t.style.display="none",!function(){4==t.readyState?f(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function f(e){var t=g(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function g(e){var t=null;try{t=x.getElementById(e)}catch(n){}return t}function m(e){return x.createElement(e)}function w(e,t,n){e.attachEvent(t,n),W[W.length]=[e,t,n]}function v(e){var t=X.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function _(e,t,n,r){if(!X.ie||!X.mac){var o=x.getElementsByTagName("head")[0];if(o){var i=n&&"string"==typeof n?n:"screen";if(r&&(I=null,P=null),!I||P!=i){var a=m("style");a.setAttribute("type","text/css"),a.setAttribute("media",i),I=o.appendChild(a),X.ie&&X.win&&typeof x.styleSheets!=A&&x.styleSheets.length>0&&(I=x.styleSheets[x.styleSheets.length-1]),P=i}X.ie&&X.win?I&&typeof I.addRule==E&&I.addRule(e,t):I&&typeof x.createTextNode!=A&&I.appendChild(x.createTextNode(e+" {"+t+"}"))}}}function y(e,t){if(z){var n=t?"visible":"hidden";B&&g(e)?g(e).style.visibility=n:_("#"+e,"visibility:"+n)}}function C(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=A?encodeURIComponent(e):e}var S,b,R,k,I,P,A="undefined",E="object",T="Shockwave Flash",D="ShockwaveFlash.ShockwaveFlash",F="application/x-shockwave-flash",O="SWFObjectExprInst",L="onreadystatechange",H=window,x=document,q=navigator,j=!1,M=[r],N=[],U=[],W=[],B=!1,$=!1,z=!0,X=function(){var e=typeof x.getElementById!=A&&typeof x.getElementsByTagName!=A&&typeof x.createElement!=A,t=q.userAgent.toLowerCase(),n=q.platform.toLowerCase(),r=n?/win/.test(n):/win/.test(t),o=n?/mac/.test(n):/mac/.test(t),i=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,a=!1,s=[0,0,0],l=null;if(typeof q.plugins!=A&&typeof q.plugins[T]==E)l=q.plugins[T].description,!l||typeof q.mimeTypes!=A&&q.mimeTypes[F]&&!q.mimeTypes[F].enabledPlugin||(j=!0,a=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof H.ActiveXObject!=A)try{var c=new ActiveXObject(D);c&&(l=c.GetVariable("$version"),l&&(a=!0,l=l.split(" ")[1].split(","),s=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(u){}return{w3:e,pv:s,wk:i,ie:a,win:r,mac:o}}();return!function(){X.w3&&((typeof x.readyState!=A&&"complete"==x.readyState||typeof x.readyState==A&&(x.getElementsByTagName("body")[0]||x.body))&&e(),B||(typeof x.addEventListener!=A&&x.addEventListener("DOMContentLoaded",e,!1),X.ie&&X.win&&(x.attachEvent(L,function(){"complete"==x.readyState&&(x.detachEvent(L,arguments.callee),e())}),H==top&&!function(){if(!B){try{x.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0),void 0}e()}}()),X.wk&&!function(){return B?void 0:/loaded|complete/.test(x.readyState)?(e(),void 0):(setTimeout(arguments.callee,0),void 0)}(),n(e)))}(),!function(){X.ie&&X.win&&window.attachEvent("onunload",function(){for(var e=W.length,t=0;e>t;t++)W[t][0].detachEvent(W[t][1],W[t][2]);for(var n=U.length,r=0;n>r;r++)h(U[r]);for(var o in X)X[o]=null;X=null;for(var i in swfobject)swfobject[i]=null;swfobject=null})}(),{registerObject:function(e,t,n,r){if(X.w3&&e&&t){var o={};o.id=e,o.swfVersion=t,o.expressInstall=n,o.callbackFn=r,N[N.length]=o,y(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){return X.w3?a(e):void 0},embedSWF:function(e,n,r,o,i,a,c,u,p,h){var f={success:!1,id:n};X.w3&&!(X.wk&&X.wk<312)&&e&&n&&r&&o&&i?(y(n,!1),t(function(){r+="",o+="";var t={};if(p&&typeof p===E)for(var g in p)t[g]=p[g];t.data=e,t.width=r,t.height=o;var m={};if(u&&typeof u===E)for(var w in u)m[w]=u[w];if(c&&typeof c===E)for(var _ in c)typeof m.flashvars!=A?m.flashvars+="&"+_+"="+c[_]:m.flashvars=_+"="+c[_];if(v(i)){var C=d(t,m,n);t.id==n&&y(n,!0),f.success=!0,f.ref=C}else{if(a&&s())return t.data=a,l(t,m,n,h),void 0;y(n,!0)}h&&h(f)})):h&&h(f)},switchOffAutoHideShow:function(){z=!1},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(e,t,n){return X.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,r){X.w3&&s()&&l(e,t,n,r)},removeSWF:function(e){X.w3&&h(e)},createCSS:function(e,t,n,r){X.w3&&_(e,t,n,r)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=x.location.search||x.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return C(t);for(var n=t.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return C(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if($){var e=g(O);e&&S&&(e.parentNode.replaceChild(S,e),b&&(y(b,!0),X.ie&&X.win&&(S.style.display="block")),R&&R(k)),$=!1}}}}();var __hasProp=Object.prototype.hasOwnProperty;window.SC=window.SC||{},window.SC.URI=function(e,t){var n,r;return null==e&&(e=""),null==t&&(t={}),r=/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/,n=/^(?:([^@]*)@)?([^:]*)(?::(\d*))?/,this.scheme=this.user=this.password=this.host=this.port=this.path=this.query=this.fragment=null,this.toString=function(){var e;return e="",this.isAbsolute()&&(e+=this.scheme,e+="://",null!=this.user&&(e+=this.user+":"+this.password+"@"),e+=this.host,null!=this.port&&(e+=":"+this.port)),e+=this.path,""!==this.path||null==this.query&&null==this.fragment||(e+="/"),null!=this.query&&(e+=this.encodeParamsWithPrepend(this.query,"?")),null!=this.fragment&&(e+=this.encodeParamsWithPrepend(this.fragment,"#")),e},this.isRelative=function(){return!this.isAbsolute()},this.isAbsolute=function(){return null!=this.host},this.decodeParams=function(e){var t,n,r,o,i,a,s,l;for(null==e&&(e=""),n={},l=e.split("&"),a=0,s=l.length;s>a;a++)r=l[a],""!==r&&(o=r.split("="),t=decodeURIComponent(o[0]),i=decodeURIComponent(o[1]||"").replace(/\+/g," "),this.normalizeParams(n,t,i));return n},this.normalizeParams=function(e,t,n){var r,o,i,a,s,l;return null==n&&(n=NULL),s=t.match(/^[\[\]]*([^\[\]]+)\]*(.*)/),i=s[1]||"",r=s[2]||"",""===r?e[i]=n:"[]"===r?(e[i]||(e[i]=[]),e[i].push(n)):(l=r.match(/^\[\]\[([^\[\]]+)\]$/)||(l=r.match(/^\[\](.+)$/)))?(o=l[1],e[i]||(e[i]=[]),a=e[i][e[i].length-1],null!=a&&a.constructor===Object&&null==a[o]?this.normalizeParams(a,o,n):e[i].push(this.normalizeParams({},o,n))):(e[i]||(e[i]={}),e[i]=this.normalizeParams(e[i],r,n)),e},this.encodeParamsWithPrepend=function(e,t){var n;return n=this.encodeParams(e),""!==n?t+n:""},this.encodeParams=function(e){var t,n,r,o,i,a,s,l;if(i="",e.constructor===String)return i=e;for(t=this.flattenParams(e),r=[],s=0,l=t.length;l>s;s++)o=t[s],n=o[0],a=o[1],null===a?r.push(n):r.push(n+"="+encodeURIComponent(a));return i=r.join("&")},this.flattenParams=function(e,t,n){var r,o,i,a,s;if(null==t&&(t=""),null==n&&(n=[]),null==e)null!=t&&n.push([t,null]);else if(e.constructor===Object)for(r in e)__hasProp.call(e,r)&&(i=e[r],o=""!==t?t+"["+r+"]":r,this.flattenParams(i,o,n));else if(e.constructor===Array)for(a=0,s=e.length;s>a;a++)i=e[a],this.flattenParams(i,t+"[]",n);else""!==t&&n.push([t,e]);return n},this.parse=function(e,t){var o,i,a,s,l;return null==e&&(e=""),null==t&&(t={}),a=function(e){return""===e?null:e},s=e.match(r),this.scheme=a(s[1]),o=s[2],null!=o&&(i=o.match(n),l=a(i[1]),null!=l&&(this.user=l.split(":")[0],this.password=l.split(":")[1]),this.host=a(i[2]),this.port=parseInt(i[3],10)||null),this.path=s[3],this.query=a(s[4]),t.decodeQuery&&(this.query=this.decodeParams(this.query)),this.fragment=a(s[5]),t.decodeFragment?this.fragment=this.decodeParams(this.fragment):void 0},this.parse(e.toString(),t),this},!function(){var AbstractDialog,ConnectDialog,EchoDialog,PickerDialog,_ref,_ref1,_ref2,__hasProp={}.hasOwnProperty,__extends=function(e,t){function n(){this.constructor=e}for(var r in t)__hasProp.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};window.SC||(window.SC={}),SC.Helper={merge:function(e,t){var n,r,o,i,a;if(e.constructor===Array){for(r=Array.apply(null,e),i=0,a=t.length;a>i;i++)o=t[i],r.push(o);return r}r={};for(n in e)__hasProp.call(e,n)&&(o=e[n],r[n]=o);for(n in t)__hasProp.call(t,n)&&(o=t[n],r[n]=o);return r},groupBy:function(e,t){var n,r,o,i,a,s;for(n={},i=0,a=e.length;a>i;i++)r=e[i],(o=r[t])&&(n[s=r[t]]||(n[s]=[]),n[r[t]].push(r));return n},loadJavascript:function(e,t){var n;return n=document.createElement("script"),n.async=!0,n.src=e,SC.Helper.attachLoadEvent(n,t),document.body.appendChild(n),n},extractOptionsAndCallbackArguments:function(e,t){var n;return n={},null!=t?(n.callback=t,n.options=e):"function"==typeof e?(n.callback=e,n.options={}):n.options=e||{},n},openCenteredPopup:function(e,t,n){var r;return r={},null!=n?(r.width=t,r.height=n):r=t,r=SC.Helper.merge(r,{location:1,left:window.screenX+(window.outerWidth-r.width)/2,top:window.screenY+(window.outerHeight-r.height)/2,toolbar:"no",scrollbars:"yes"}),window.open(e,r.name,this._optionsToString(r))},_optionsToString:function(e){var t,n,r;n=[];for(t in e)__hasProp.call(e,t)&&(r=e[t],n.push(t+"="+r));return n.join(", ")},attachLoadEvent:function(e,t){return e.addEventListener?e.addEventListener("load",t,!1):e.onreadystatechange=function(){return"complete"===this.readyState?t():void 0}},millisecondsToHMS:function(e){var t,n,r,o,i;return t={h:Math.floor(e/36e5),m:Math.floor(e/6e4%60),s:Math.floor(e/1e3%60)},i=[],t.h>0&&i.push(t.h),n=t.m,r="",o="",t.m<10&&t.h>0&&(r="0"),t.s<10&&(o="0"),i.push(r+t.m),i.push(o+t.s),i.join(".")},setFlashStatusCodeMaps:function(e){return e["_status_code_map[400]"]=200,e["_status_code_map[401]"]=200,e["_status_code_map[403]"]=200,e["_status_code_map[404]"]=200,e["_status_code_map[422]"]=200,e["_status_code_map[500]"]=200,e["_status_code_map[503]"]=200,e["_status_code_map[504]"]=200},responseHandler:function(e,t){var n,r;return r=SC.Helper.JSON.parse(e),n=null,r?r.errors&&(n={message:r.errors&&r.errors[0].error_message}):n=t?{message:"HTTP Error: "+t.status}:{message:"Unknown error"},{json:r,error:n}},FakeStorage:function(){return{_store:{},getItem:function(e){return this._store[e]||null},setItem:function(e,t){return this._store[e]=t.toString()},removeItem:function(e){return delete this._store[e]}}},JSON:{parse:function(string){return"{"!==string[0]&&"["!==string[0]?null:null!=window.JSON?window.JSON.parse(string):eval(string)}}},window.SC=SC.Helper.merge(SC||{},{_version:"1.1.5",_baseUrl:"//connect.soundcloud.com",options:{site:"soundcloud.com",baseUrl:"//connect.soundcloud.com"},connectCallbacks:{},_popupWindow:void 0,initialize:function(e){var t,n,r;null==e&&(e={}),this.accessToken(e.access_token);for(t in e)__hasProp.call(e,t)&&(n=e[t],this.options[t]=n);return(r=this.options).flashXHR||(r.flashXHR=void 0===(new XMLHttpRequest).withCredentials),this},hostname:function(e){var t;return t="",null!=e&&(t+=e+"."),t+=this.options.site}}),window.SC=SC.Helper.merge(SC||{},{_apiRequest:function(e,t,n,r){var o,i;return null==r&&(r=n,n=void 0),n||(n={}),i=SC.prepareRequestURI(t,n),i.query.format="json",SC.options.flashXHR?SC.Helper.setFlashStatusCodeMaps(i.query):i.query["_status_code_map[302]"]=200,("PUT"===e||"DELETE"===e)&&(i.query._method=e,e="POST"),"GET"!==e&&(o=i.encodeParams(i.query),i.query={}),this._request(e,i,"application/x-www-form-urlencoded",o,function(e,t){var n;return n=SC.Helper.responseHandler(e,t),n.json&&"302 - Found"===n.json.status?SC._apiRequest("GET",n.json.location,r):r(n.json,n.error)})},_request:function(e,t,n,r,o){return SC.options.flashXHR?this._flashRequest(e,t,n,r,o):this._xhrRequest(e,t,n,r,o)},_xhrRequest:function(e,t,n,r,o){var i;return i=new XMLHttpRequest,i.open(e,t.toString(),!0),i.setRequestHeader("Content-Type",n),i.onreadystatechange=function(e){return 4===e.target.readyState?o(e.target.responseText,e.target):void 0},i.send(r)},_flashRequest:function(e,t,n,r,o){return this.whenRecordingReady(function(){return Recorder.request(e,t.toString(),n,r,function(e,t){return o(Recorder._externalInterfaceDecode(e),t)})})},post:function(e,t,n){return this._apiRequest("POST",e,t,n)},put:function(e,t,n){return this._apiRequest("PUT",e,t,n)},get:function(e,t,n){return this._apiRequest("GET",e,t,n)},"delete":function(e,t){return this._apiRequest("DELETE",e,{},t)},prepareRequestURI:function(e,t){var n,r,o;null==t&&(t={}),r=new SC.URI(e,{decodeQuery:!0});for(n in t)__hasProp.call(t,n)&&(o=t[n],r.query[n]=o);return r.isRelative()&&(r.host=this.hostname("api"),r.scheme=window.location.protocol.slice(0,-1)),null!=this.accessToken()?(r.query.oauth_token=this.accessToken(),r.scheme="https"):r.query.client_id=this.options.client_id,r},_getAll:function(e,t,n,r){return null==r&&(r=[]),null==n&&(n=t,t=void 0),t||(t={}),t.offset||(t.offset=0),t.limit||(t.limit=50),this.get(e,t,function(o){return o.constructor===Array&&o.length>0?(r=SC.Helper.merge(r,o),t.offset+=t.limit,SC._getAll(e,t,n,r)):n(r,null)})}}),window.SC=SC.Helper.merge(SC||{},{_connectWindow:null,connect:function(e){var t,n,r;if(r="function"==typeof e?{connected:e}:e,n={client_id:r.client_id||SC.options.client_id,redirect_uri:r.redirect_uri||SC.options.redirect_uri,response_type:"code_and_token",scope:r.scope||"non-expiring",display:"popup",window:r.window,retainWindow:r.retainWindow},n.client_id&&n.redirect_uri)return t=SC.dialog(SC.Dialog.CONNECT,n,function(e){if(null!=e.error)throw new Error("SC OAuth2 Error: "+e.error_description);return SC.accessToken(e.access_token),null!=r.connected&&r.connected(),null!=r.callback?r.callback():void 0}),this._connectWindow=t.options.window,t;throw"Options client_id and redirect_uri must be passed"},connectCallback:function(){return SC.Dialog._handleDialogReturn(SC._connectWindow)},disconnect:function(){return this.accessToken(null)},_trigger:function(e,t){return null!=this.connectCallbacks[e]?this.connectCallbacks[e](t):void 0},accessToken:function(e){var t,n;return n="SC.accessToken",t=this.storage(),void 0===e?t.getItem(n):null===e?t.removeItem(n):t.setItem(n,e)},isConnected:function(){return null!=this.accessToken()}}),window.SC=SC.Helper.merge(SC||{},{_dialogsPath:"/dialogs",dialog:function(e,t,n){var r,o,i;return r=SC.Helper.extractOptionsAndCallbackArguments(t,n),i=r.options,n=r.callback,i.callback=n,i.redirect_uri=this.options.redirect_uri,o=new SC.Dialog[e+"Dialog"](i),SC.Dialog._dialogs[o.id]=o,o.open(),o},Dialog:{ECHO:"Echo",CONNECT:"Connect",PICKER:"Picker",ID_PREFIX:"SoundCloud_Dialog",_dialogs:{},_isDialogId:function(e){return(e||"").match(new RegExp("^"+this.ID_PREFIX))},_getDialogIdFromWindow:function(e){var t,n;return n=new SC.URI(e.location,{decodeQuery:!0,decodeFragment:!0}),t=n.query.state||n.fragment.state,this._isDialogId(t)?t:null},_handleDialogReturn:function(e){var t,n;return n=this._getDialogIdFromWindow(e),t=this._dialogs[n],null!=t&&t.handleReturn()?delete this._dialogs[n]:void 0},_handleInPopupContext:function(){var e;if(this._getDialogIdFromWindow(window)&&!window.location.pathname.match(/\/dialogs\//)){if(e=navigator.userAgent.match(/OS 5(_\d)+ like Mac OS X/i))return window.opener.SC.Dialog._handleDialogReturn(window);if(window.opener)return window.opener.setTimeout(function(){return window.opener.SC.Dialog._handleDialogReturn(window)},1);if(window.top)return window.top.setTimeout(function(){return window.top.SC.Dialog._handleDialogReturn(window)},1)}},AbstractDialog:AbstractDialog=function(){function e(e){this.options=null!=e?e:{},this.id=this.generateId()}return e.prototype.WIDTH=456,e.prototype.HEIGHT=510,e.prototype.ID_PREFIX="SoundCloud_Dialog",e.prototype.PARAM_KEYS=["redirect_uri"],e.prototype.requiresAuthentication=!1,e.prototype.generateId=function(){return[this.ID_PREFIX,Math.ceil(1e6*Math.random()).toString(16)].join("_")},e.prototype.buildURI=function(e){var t,n,r,o;for(null==e&&(e=new SC.URI(SC._baseUrl)),e.scheme=window.location.protocol.slice(0,-1),e.path+=SC._dialogsPath+"/"+this.name+"/",e.fragment={state:this.id},this.requiresAuthentication&&(e.fragment.access_token=SC.accessToken()),o=this.PARAM_KEYS,n=0,r=o.length;r>n;n++)t=o[n],null!=this.options[t]&&(e.fragment[t]=this.options[t]);return e},e.prototype.open=function(){var e;return this.requiresAuthentication&&null==SC.accessToken()?this.authenticateAndOpen():(e=this.buildURI(),null!=this.options.window?this.options.window.location=e:this.options.window=SC.Helper.openCenteredPopup(e,{width:this.WIDTH,height:this.HEIGHT}))},e.prototype.authenticateAndOpen=function(){var e,t=this;return e=SC.connect({retainWindow:!0,window:this.options.window,connected:function(){return t.options.window=e.options.window,t.open()}})},e.prototype.paramsFromWindow=function(){var e,t;return t=new SC.URI(this.options.window.location,{decodeFragment:!0,decodeQuery:!0}),e=SC.Helper.merge(t.query,t.fragment)},e.prototype.handleReturn=function(){var e;return e=this.paramsFromWindow(),this.options.retainWindow||this.options.window.close(),this.options.callback(e)},e}(),EchoDialog:EchoDialog=function(e){function t(){return _ref=t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.PARAM_KEYS=["client_id","redirect_uri","hello"],t.prototype.name="echo",t}(AbstractDialog),PickerDialog:PickerDialog=function(e){function t(){return _ref1=t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.PARAM_KEYS=["client_id","redirect_uri"],t.prototype.name="picker",t.prototype.requiresAuthentication=!0,t.prototype.handleReturn=function(){var e,t=this;return e=this.paramsFromWindow(),"logout"===e.action?(SC.accessToken(null),this.open(),!1):null!=e.track_uri?(this.options.retainWindow||this.options.window.close(),SC.get(e.track_uri,function(e){return t.options.callback({track:e})}),!0):void 0},t}(AbstractDialog),ConnectDialog:ConnectDialog=function(e){function t(){return _ref2=t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.PARAM_KEYS=["client_id","redirect_uri","client_secret","response_type","scope","display"],t.prototype.name="connect",t.prototype.buildURI=function(){var e;return e=t.__super__.buildURI.apply(this,arguments),e.scheme="https",e.host="soundcloud.com",e.path="/connect",e.query=e.fragment,e.fragment={},e},t}(AbstractDialog)}}),SC.Dialog._handleInPopupContext(),window.SC=SC.Helper.merge(SC||{},{Loader:{States:{UNLOADED:1,LOADING:2,READY:3},Package:function(e,t){return{name:e,callbacks:[],loadFunction:t,state:SC.Loader.States.UNLOADED,addCallback:function(e){return this.callbacks.push(e)},runCallbacks:function(){var e,t,n,r;for(r=this.callbacks,t=0,n=r.length;n>t;t++)e=r[t],e.apply(this);return this.callbacks=[]},setReady:function(){return this.state=SC.Loader.States.READY,this.runCallbacks()},load:function(){return this.state=SC.Loader.States.LOADING,this.loadFunction.apply(this)},whenReady:function(e){switch(this.state){case SC.Loader.States.UNLOADED:return this.addCallback(e),this.load();case SC.Loader.States.LOADING:return this.addCallback(e);case SC.Loader.States.READY:return e()}}}},packages:{},registerPackage:function(e){return this.packages[e.name]=e}}}),window.SC=SC.Helper.merge(SC||{},{oEmbed:function(e,t,n){var r,o;return null==n&&(n=t,t=void 0),t||(t={}),t.url=e,o=new SC.URI(window.location.protocol+"//"+SC.hostname()+"/oembed.json"),o.query=t,void 0!==n.nodeType&&1===n.nodeType&&(r=n,n=function(e){return r.innerHTML=e.html}),this._request("GET",o.toString(),null,null,function(e,t){var r;return r=SC.Helper.responseHandler(e,t),n(r.json,r.error)})}}),window.SC=SC.Helper.merge(SC||{},{_recorderSwfPath:"/recorder.js/recorder-0.9.0.swf",whenRecordingReady:function(e){return SC.Loader.packages.recording.whenReady(e)},record:function(e){return null==e&&(e={}),this.whenRecordingReady(function(){return Recorder.record(e)})},recordStop:function(e){return null==e&&(e={}),Recorder.stop()},recordPlay:function(e){return null==e&&(e={}),Recorder.play(e)},recordUpload:function(e,t){var n,r;return null==e&&(e={}),r=SC.prepareRequestURI("/tracks",e),r.query.format="json",SC.Helper.setFlashStatusCodeMaps(r.query),n=r.flattenParams(r.query),Recorder.upload({method:"POST",url:"https://"+this.hostname("api")+"/tracks",audioParam:"track[asset_data]",params:n,success:function(e){var n;return n=SC.Helper.responseHandler(e),t(n.json,n.error)}})}}),SC.Loader.registerPackage(new SC.Loader.Package("recording",function(){return Recorder.flashInterface()?SC.Loader.packages.recording.setReady():Recorder.initialize({swfSrc:SC._baseUrl+SC._recorderSwfPath+"?"+SC._version,initialized:function(){return SC.Loader.packages.recording.setReady()}})})),window.SC=SC.Helper.merge(SC||{},{storage:function(){return this._fakeStorage||(this._fakeStorage=new SC.Helper.FakeStorage)}}),window.SC=SC.Helper.merge(SC||{},{_soundmanagerPath:"/soundmanager2",_soundmanagerScriptPath:"/soundmanager2.js",whenStreamingReady:function(e){return SC.Loader.packages.streaming.whenReady(e)},_prepareStreamUrl:function(e){var t,n;return n=e.toString().match(/^\d.*$/)?"/tracks/"+e:e,t=SC.prepareRequestURI(n),t.path.match(/\/stream/)||(t.path+="/stream"),t.toString()},_setOnPositionListenersForComments:function(e,t,n){var r,o,i,a;o=SC.Helper.groupBy(t,"timestamp"),a=[];for(i in o)r=o[i],a.push(function(t,n,r){return e.onposition(parseInt(t,10),function(){return r(n)})}(i,r,n));return a},stream:function(e,t,n){var r,o,i=this;return r=SC.Helper.extractOptionsAndCallbackArguments(t,n),o=r.options,n=r.callback,SC.whenStreamingReady(function(){var t,r;return o.id="T"+e+"-"+Math.random(),o.url=i._prepareStreamUrl(e),t=function(e){var t;return t=soundManager.createSound(e),null!=n&&n(t),t},(r=o.ontimedcomments)?(delete o.ontimedcomments,SC._getAll(o.url.replace("/stream","/comments"),function(e){var n;return n=t(o),i._setOnPositionListenersForComments(n,e,r)})):t(o)})},streamStopAll:function(){return null!=window.soundManager?window.soundManager.stopAll():void 0}}),SC.Loader.registerPackage(new SC.Loader.Package("streaming",function(){var e;return null!=window.soundManager?SC.Loader.packages.streaming.setReady():(e=SC._baseUrl+SC._soundmanagerPath,window.SM2_DEFER=!0,SC.Helper.loadJavascript(e+SC._soundmanagerScriptPath,function(){return window.soundManager=new SoundManager,soundManager.url=e,soundManager.flashVersion=9,soundManager.useFlashBlock=!1,soundManager.useHTML5Audio=!1,soundManager.beginDelayedInit(),soundManager.onready(function(){return SC.Loader.packages.streaming.setReady()})}))}))}.call(this);