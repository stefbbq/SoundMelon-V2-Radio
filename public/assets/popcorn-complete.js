/*
 * popcorn.js version 1.3
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */
!function(e,t){function n(e,t){return function(){if(g.plugin.debug)return e.apply(this,arguments);try{return e.apply(this,arguments)}catch(n){g.plugin.errors.push({plugin:t,thrown:n,source:e.toString()}),this.emit("pluginerror",g.plugin.errors)}}}if(t.addEventListener){var a=Array.prototype,i=Object.prototype,o=a.forEach,r=a.slice,s=i.hasOwnProperty,l=i.toString,u=e.Popcorn,d=[],c=!1,p=!1,f={events:{hash:{},apis:{}}},m=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,16)}}(),h=function(e){return Object.keys?Object.keys(e):function(e){var t,n=[];for(t in e)s.call(e,t)&&n.push(t);return n}(e)},g=function(e,t){return new g.p.init(e,t||null)};g.version="1.3",g.isSupported=!0,g.instances=[],g.p=g.prototype={init:function(e,n){var a,i,o=this;{if("function"!=typeof e){if("string"==typeof e)try{a=t.querySelector(e)}catch(r){throw new Error("Popcorn.js Error: Invalid media element selector: "+e)}if(this.media=a||e,i=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video",this[i]=this.media,this.options=n||{},this.id=this.options.id||g.guid(i),g.byId(this.id))throw new Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=!1,this.data={running:{cue:[]},timeUpdate:g.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}},g.instances.push(this);var s=function(){o.media.currentTime<0&&(o.media.currentTime=0),o.media.removeEventListener("loadeddata",s,!1);var e,t,n,a,i,r;e=o.media.duration,t=e!=e?Number.MAX_VALUE:e+1,g.addTrackEvent(o,{start:t,end:t}),o.options.frameAnimation?(o.data.timeUpdate=function(){g.timeUpdate(o,{}),g.forEach(g.manifest,function(e,t){if(n=o.data.running[t]){i=n.length;for(var s=0;i>s;s++)a=n[s],r=a._natives,r&&r.frame&&r.frame.call(o,{},a,o.currentTime())}}),o.emit("timeupdate"),!o.isDestroyed&&m(o.data.timeUpdate)},!o.isDestroyed&&m(o.data.timeUpdate)):(o.data.timeUpdate=function(e){g.timeUpdate(o,e)},o.isDestroyed||o.media.addEventListener("timeupdate",o.data.timeUpdate,!1))};return Object.defineProperty(this,"error",{get:function(){return o.media.error}}),o.media.readyState>=2?s():o.media.addEventListener("loadeddata",s,!1),this}if("complete"===t.readyState)return e(t,g),void 0;if(d.push(e),!c){c=!0;var l=function(){p=!0,t.removeEventListener("DOMContentLoaded",l,!1);for(var e=0,n=d.length;n>e;e++)d[e].call(t,g);d=null};t.addEventListener("DOMContentLoaded",l,!1)}}}},g.p.init.prototype=g.p,g.byId=function(e){for(var t=g.instances,n=t.length,a=0;n>a;a++)if(t[a].id===e)return t[a];return null},g.forEach=function(e,t,n){if(!e||!t)return{};n=n||this;var a,i;if(o&&e.forEach===o)return e.forEach(t,n);if("[object NodeList]"===l.call(e)){for(a=0,i=e.length;i>a;a++)t.call(n,e[a],a,e);return e}for(a in e)s.call(e,a)&&t.call(n,e[a],a,e);return e},g.extend=function(e){var t=e,n=r.call(arguments,1);return g.forEach(n,function(e){for(var n in e)t[n]=e[n]}),t},g.extend(g,{noConflict:function(t){return t&&(e.Popcorn=u),g},error:function(e){throw new Error(e)},guid:function(e){return g.guid.counter++,(e?e:"")+(+new Date+g.guid.counter)},sizeOf:function(e){var t=0;for(var n in e)t++;return t},isArray:Array.isArray||function(e){return"[object Array]"===l.call(e)},nop:function(){},position:function(n){var a,i,o,r,s,l,u=n.getBoundingClientRect(),d={},c=(n.ownerDocument,t.documentElement),p=t.body;a=c.clientTop||p.clientTop||0,i=c.clientLeft||p.clientLeft||0,o=e.pageYOffset&&c.scrollTop||p.scrollTop,r=e.pageXOffset&&c.scrollLeft||p.scrollLeft,s=Math.ceil(u.top+o-a),l=Math.ceil(u.left+r-i);for(var f in u)d[f]=Math.round(u[f]);return g.extend({},d,{top:s,left:l})},disable:function(e,t){if(!e.data.disabled[t]){e.data.disabled[t]=!0;for(var n,a=e.data.running[t].length-1;a>=0;a--)n=e.data.running[t][a],n._natives.end.call(e,null,n)}return e},enable:function(e,t){if(e.data.disabled[t]){e.data.disabled[t]=!1;for(var n,a=e.data.running[t].length-1;a>=0;a--)n=e.data.running[t][a],n._natives.start.call(e,null,n)}return e},destroy:function(e){var t,n,a,i,o=e.data.events,r=e.data.trackEvents;for(n in o){t=o[n];for(a in t)delete t[a];o[n]=null}for(i in g.registryByName)g.removePlugin(e,i);r.byStart.length=0,r.byEnd.length=0,e.isDestroyed||(e.data.timeUpdate&&e.media.removeEventListener("timeupdate",e.data.timeUpdate,!1),e.isDestroyed=!0)}}),g.guid.counter=1,g.extend(g.p,function(){var e="load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended",t={};return g.forEach(e.split(/\s+/g),function(e){t[e]=function(t){var n;return"function"==typeof this.media[e]?(null!=t&&/play|pause/.test(e)&&(this.media.currentTime=g.util.toSeconds(t)),this.media[e](),this):null!=t?(n=this.media[e],this.media[e]=t,n!==t&&this.emit("attrchange",{attribute:e,previousValue:n,currentValue:t}),this):this.media[e]}}),t}()),g.forEach("enable disable".split(" "),function(e){g.p[e]=function(t){return g[e](this,t)}}),g.extend(g.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(e,t,n){var a,i,o=arguments.length;try{i=g.util.toSeconds(e)}catch(r){}if("number"==typeof i&&(e=i),"number"==typeof e&&2===o)n=t,t=e,e=g.guid("cue");else if(1===o)t=-1;else if(a=this.getTrackEvent(e))"string"==typeof e&&2===o&&("number"==typeof t&&(n=a._natives.start),"function"==typeof t&&(n=t,t=a.start));else if(o>=2){if("string"==typeof t){try{i=g.util.toSeconds(t)}catch(r){}t=i}"number"==typeof t&&(n=g.nop()),"function"==typeof t&&(n=t,t=-1)}return g.addTrackEvent(this,{id:e,start:t,end:t+1,_running:!1,_natives:{start:n||g.nop,end:g.nop,type:"cue"}}),this},mute:function(e){var t=null==e||e===!0?"muted":"unmuted";return"unmuted"===t&&(this.media.muted=!1,this.media.volume=this.data.state.volume),"muted"===t&&(this.data.state.volume=this.media.volume,this.media.muted=!0),this.emit(t),this},unmute:function(e){return this.mute(null==e?!1:!e)},position:function(){return g.position(this.media)},toggle:function(e){return g[this.data.disabled[e]?"enable":"disable"](this,e)},defaults:function(e,t){return g.isArray(e)?(g.forEach(e,function(e){for(var t in e)this.defaults(t,e[t])},this),this):(this.options.defaults||(this.options.defaults={}),this.options.defaults[e]||(this.options.defaults[e]={}),g.extend(this.options.defaults[e],t),this)}}),g.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"},g.Events.Natives=g.Events.UIEvents+" "+g.Events.MouseEvents+" "+g.Events.Events,f.events.apiTypes=["UIEvents","MouseEvents","Events"],function(e,t){for(var n=f.events.apiTypes,a=e.Natives.split(/\s+/g),i=0,o=a.length;o>i;i++)t.hash[a[i]]=!0;n.forEach(function(n){t.apis[n]={};for(var a=e[n].split(/\s+/g),i=a.length,o=0;i>o;o++)t.apis[n][a[o]]=!0})}(g.Events,f.events),g.events={isNative:function(e){return!!f.events.hash[e]},getInterface:function(e){if(!g.events.isNative(e))return!1;for(var t,n,a=f.events,i=a.apiTypes,o=a.apis,r=0,s=i.length;s>r;r++)if(n=i[r],o[n][e]){t=n;break}return t},all:g.Events.Natives.split(/\s+/g),fn:{trigger:function(n,a){var i,o;if(this.data.events[n]&&g.sizeOf(this.data.events[n])){if(i=g.events.getInterface(n))return o=t.createEvent(i),o.initEvent(n,!0,!0,e,1),this.media.dispatchEvent(o),this;g.forEach(this.data.events[n],function(e){e.call(this,a)},this)}return this},listen:function(e,t){var n,a=this,i=!0,o=g.events.hooks[e];return this.data.events[e]||(this.data.events[e]={},i=!1),o&&(o.add&&o.add.call(this,{},t),o.bind&&(e=o.bind),o.handler&&(n=t,t=function(e){o.handler.call(a,e,n)}),i=!0,this.data.events[e]||(this.data.events[e]={},i=!1)),this.data.events[e][t.name||t.toString()+g.guid()]=t,!i&&g.events.all.indexOf(e)>-1&&this.media.addEventListener(e,function(t){g.forEach(a.data.events[e],function(e){"function"==typeof e&&e.call(a,t)})},!1),this},unlisten:function(e,t){return this.data.events[e]&&this.data.events[e][t]?(delete this.data.events[e][t],this):(this.data.events[e]=null,this)}},hooks:{canplayall:{bind:"canplaythrough",add:function(e,t){var n=!1;this.media.readyState&&(t.call(this,e),n=!0),this.data.hooks.canplayall={fired:n}},handler:function(e,t){this.data.hooks.canplayall.fired||(t.call(this,e),this.data.hooks.canplayall.fired=!0)}}}},g.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(e){g.p[e[0]]=g.p[e[1]]=g.events.fn[e[0]]}),g.addTrackEvent=function(e,t){var n,a,i;t.id&&(n=e.getTrackEvent(t.id)),n&&(a=!0,t=g.extend({},n,t),e.removeTrackEvent(t.id)),t&&t._natives&&t._natives.type&&e.options.defaults&&e.options.defaults[t._natives.type]&&(t=g.extend({},e.options.defaults[t._natives.type],t)),t._natives&&(t._id=t.id||t._id||g.guid(t._natives.type),e.data.history.push(t._id)),t.start=g.util.toSeconds(t.start,e.options.framerate),t.end=g.util.toSeconds(t.end,e.options.framerate);var o,r,s=e.data.trackEvents.byStart,l=e.data.trackEvents.byEnd;for(o=s.length-1;o>=0;o--)if(t.start>=s[o].start){s.splice(o+1,0,t);break}for(r=l.length-1;r>=0;r--)if(t.end>l[r].end){l.splice(r+1,0,t);break}t.end>e.media.currentTime&&t.start<=e.media.currentTime&&(t._running=!0,e.data.running[t._natives.type].push(t),e.data.disabled[t._natives.type]||t._natives.start.call(e,null,t)),o<=e.data.trackEvents.startIndex&&t.start<=e.data.trackEvents.previousUpdateTime&&e.data.trackEvents.startIndex++,r<=e.data.trackEvents.endIndex&&t.end<e.data.trackEvents.previousUpdateTime&&e.data.trackEvents.endIndex++,this.timeUpdate(e,null,!0),t._id&&g.addTrackEvent.ref(e,t),a&&(i="cue"===t._natives.type?"cuechange":"trackchange",e.emit(i,{id:t.id,previousValue:{time:n.start,fn:n._natives.start},currentValue:{time:t.start,fn:t._natives.start}}))},g.addTrackEvent.ref=function(e,t){return e.data.trackRefs[t._id]=t,e},g.removeTrackEvent=function(e,t){for(var n,a,i,o=e.data.history.length,r=e.data.trackEvents.byStart.length,s=0,l=0,u=[],d=[],c=[],p=[];--r>-1;)n=e.data.trackEvents.byStart[s],a=e.data.trackEvents.byEnd[s],n._id||(u.push(n),d.push(a)),n._id&&(n._id!==t&&u.push(n),a._id!==t&&d.push(a),n._id===t&&(l=s,n._natives._teardown&&n._natives._teardown.call(e,n))),s++;if(r=e.data.trackEvents.animating.length,s=0,r)for(;--r>-1;)i=e.data.trackEvents.animating[s],i._id||c.push(i),i._id&&i._id!==t&&c.push(i),s++;l<=e.data.trackEvents.startIndex&&e.data.trackEvents.startIndex--,l<=e.data.trackEvents.endIndex&&e.data.trackEvents.endIndex--,e.data.trackEvents.byStart=u,e.data.trackEvents.byEnd=d,e.data.trackEvents.animating=c;for(var f=0;o>f;f++)e.data.history[f]!==t&&p.push(e.data.history[f]);e.data.history=p,g.removeTrackEvent.ref(e,t)},g.removeTrackEvent.ref=function(e,t){return delete e.data.trackRefs[t],e},g.getTrackEvents=function(e){for(var t,n=[],a=e.data.trackEvents.byStart,i=a.length,o=0;i>o;o++)t=a[o],t._id&&n.push(t);return n},g.getTrackEvents.ref=function(e){return e.data.trackRefs},g.getTrackEvent=function(e,t){return e.data.trackRefs[t]},g.getTrackEvent.ref=function(e,t){return e.data.trackRefs[t]},g.getLastTrackEventId=function(e){return e.data.history[e.data.history.length-1]},g.timeUpdate=function(e,t){var n,a,i,o,r,s=e.media.currentTime,l=e.data.trackEvents.previousUpdateTime,u=e.data.trackEvents,d=u.endIndex,c=u.startIndex,p=u.byStart.length,f=u.byEnd.length,m=g.registryByName,h="trackstart",y="trackend";if(s>=l){for(;u.byEnd[d]&&u.byEnd[d].end<=s;){if(n=u.byEnd[d],i=n._natives,o=i&&i.type,i&&!m[o]&&!e[o])return g.removeTrackEvent(e,n._id),void 0;n._running===!0&&(n._running=!1,r=e.data.running[o],r.splice(r.indexOf(n),1),e.data.disabled[o]||(i.end.call(e,t,n),e.emit(y,g.extend({},n,{plugin:o,type:y})))),d++}for(;u.byStart[c]&&u.byStart[c].start<=s;){if(a=u.byStart[c],i=a._natives,o=i&&i.type,i&&!m[o]&&!e[o])return g.removeTrackEvent(e,a._id),void 0;a.end>s&&a._running===!1&&(a._running=!0,e.data.running[o].push(a),e.data.disabled[o]||(i.start.call(e,t,a),e.emit(h,g.extend({},a,{plugin:o,type:h})))),c++}}else if(l>s){for(;u.byStart[c]&&u.byStart[c].start>s;){if(a=u.byStart[c],i=a._natives,o=i&&i.type,i&&!m[o]&&!e[o])return g.removeTrackEvent(e,a._id),void 0;a._running===!0&&(a._running=!1,r=e.data.running[o],r.splice(r.indexOf(a),1),e.data.disabled[o]||(i.end.call(e,t,a),e.emit(y,g.extend({},a,{plugin:o,type:y})))),c--}for(;u.byEnd[d]&&u.byEnd[d].end>s;){if(n=u.byEnd[d],i=n._natives,o=i&&i.type,i&&!m[o]&&!e[o])return g.removeTrackEvent(e,n._id),void 0;n.start<=s&&n._running===!1&&(n._running=!0,e.data.running[o].push(n),e.data.disabled[o]||(i.start.call(e,t,n),e.emit(h,g.extend({},n,{plugin:o,type:h})))),d--}}u.endIndex=d,u.startIndex=c,u.previousUpdateTime=s,u.byStart.length<p&&u.startIndex--,u.byEnd.length<f&&u.endIndex--},g.extend(g.p,{getTrackEvents:function(){return g.getTrackEvents.call(null,this)},getTrackEvent:function(e){return g.getTrackEvent.call(null,this,e)},getLastTrackEventId:function(){return g.getLastTrackEventId.call(null,this)},removeTrackEvent:function(e){return g.removeTrackEvent.call(null,this,e),this},removePlugin:function(e){return g.removePlugin.call(null,this,e),this},timeUpdate:function(e){return g.timeUpdate.call(null,this,e),this},destroy:function(){return g.destroy.call(null,this),this}}),g.manifest={},g.registry=[],g.registryByName={},g.plugin=function(e,t,a){if(g.protect.natives.indexOf(e.toLowerCase())>=0)return g.error("'"+e+"' is a protected function name"),void 0;var i=["start","end"],o={},l="function"==typeof t,u=["_setup","_teardown","start","end","frame"],d=function(e,t){return e=e||g.nop,t=t||g.nop,function(){e.apply(this,arguments),t.apply(this,arguments)}};g.manifest[e]=a=a||t.manifest||{},u.forEach(function(a){t[a]=n(t[a]||g.nop,e)});var c=function(t,n){if(!n)return this;if(n.ranges&&g.isArray(n.ranges))return g.forEach(n.ranges,function(t){var a=g.extend({},n,t);delete a.ranges,this[e](a)},this),this;var o,l=n._natives={},c="";return g.extend(l,t),n._natives.type=e,n._running=!1,l.start=l.start||l["in"],l.end=l.end||l.out,n.once&&(l.end=d(l.end,function(){this.removeTrackEvent(n._id)})),l._teardown=d(function(){var e=r.call(arguments),t=this.data.running[l.type];e.unshift(null),e[1]._running&&t.splice(t.indexOf(n),1)&&l.end.apply(this,e)},l._teardown),n.compose=n.compose&&n.compose.split(" ")||[],n.effect=n.effect&&n.effect.split(" ")||[],n.compose=n.compose.concat(n.effect),n.compose.forEach(function(e){c=g.compositions[e]||{},u.forEach(function(e){l[e]=d(l[e],c[e])})}),n._natives.manifest=a,"start"in n||(n.start=n["in"]||0),n.end||0===n.end||(n.end=n.out||Number.MAX_VALUE),s.call(n,"toString")||(n.toString=function(){var t=["start: "+n.start,"end: "+n.end,"id: "+(n.id||n._id)];return null!=n.target&&t.push("target: "+n.target),e+" ( "+t.join(", ")+" )"}),n.target||(o="options"in a&&a.options,n.target=o&&"target"in o&&o.target),n._natives&&(n._id=g.guid(n._natives.type)),n._natives._setup&&n._natives._setup.call(this,n),g.addTrackEvent(this,n),g.forEach(t,function(e,t){"type"!==t&&-1===i.indexOf(t)&&this.on(t,e)},this),this};g.p[e]=o[e]=function(n,a){var i,o,r;if(arguments.length,n&&!a)a=n,n=null;else{if(i=this.getTrackEvent(n))return a=g.extend({},i,a),g.addTrackEvent(this,a),this;a.id=n}return this.data.running[e]=this.data.running[e]||[],o=this.options.defaults&&this.options.defaults[e]||{},r=g.extend({},o,a),c.call(this,l?t.call(this,r):t,r)},a&&g.extend(t,{manifest:a});var p={fn:o[e],definition:t,base:t,parents:[],name:e};return g.registry.push(g.extend(o,p,{type:e})),g.registryByName[e]=p,o},g.plugin.errors=[],g.plugin.debug="@VERSION"===g.version,g.removePlugin=function(e,t){if(!t){if(t=e,e=g.p,g.protect.natives.indexOf(t.toLowerCase())>=0)return g.error("'"+t+"' is a protected function name"),void 0;var n,a=g.registry.length;for(n=0;a>n;n++)if(g.registry[n].name===t)return g.registry.splice(n,1),delete g.registryByName[t],delete g.manifest[t],delete e[t],void 0}var i,o,r=e.data.trackEvents.byStart,s=e.data.trackEvents.byEnd,l=e.data.trackEvents.animating;for(i=0,o=r.length;o>i;i++)r[i]&&r[i]._natives&&r[i]._natives.type===t&&(r[i]._natives._teardown&&r[i]._natives._teardown.call(e,r[i]),r.splice(i,1),i--,o--,e.data.trackEvents.startIndex<=i&&(e.data.trackEvents.startIndex--,e.data.trackEvents.endIndex--)),s[i]&&s[i]._natives&&s[i]._natives.type===t&&s.splice(i,1);for(i=0,o=l.length;o>i;i++)l[i]&&l[i]._natives&&l[i]._natives.type===t&&(l.splice(i,1),i--,o--)},g.compositions={},g.compose=function(e,t,n){g.manifest[e]=n=n||t.manifest||{},g.compositions[e]=t},g.plugin.effect=g.effect=g.compose;var y=/^(?:\.|#|\[)/;g.dom={debug:!1,find:function(e,n){var a=null;if(e=e.trim(),n=n||t,e){if(!y.test(e)&&(a=t.getElementById(e),null!==a))return a;try{a=n.querySelector(e)}catch(i){if(g.dom.debug)throw new Error(i)}}return a}};var v=/\?/,b={url:"",data:"",dataType:"",success:g.nop,type:"GET",async:!0,xhr:function(){return new e.XMLHttpRequest}};g.xhr=function(e){if(e.dataType=e.dataType&&e.dataType.toLowerCase()||null,e.dataType&&("jsonp"===e.dataType||"script"===e.dataType))return g.xhr.getJSONP(e.url,e.success,"script"===e.dataType),void 0;var t=g.extend({},b,e);return t.ajax=t.xhr(),t.ajax?("GET"===t.type&&t.data&&(t.url+=(v.test(t.url)?"&":"?")+t.data,t.data=null),t.ajax.open(t.type,t.url,t.async),t.ajax.send(t.data||null),g.xhr.httpData(t)):void 0},g.xhr.httpData=function(e){var t,n,a=null,i=null;return e.ajax.onreadystatechange=function(){if(4===e.ajax.readyState){try{a=JSON.parse(e.ajax.responseText)}catch(o){}if(t={xml:e.ajax.responseXML,text:e.ajax.responseText,json:a},!t.xml||!t.xml.documentElement){t.xml=null;try{n=new DOMParser,i=n.parseFromString(e.ajax.responseText,"text/xml"),i.getElementsByTagName("parsererror").length||(t.xml=i)}catch(o){}}e.dataType&&(t=t[e.dataType]),e.success.call(e.ajax,t)}},t},g.xhr.getJSONP=function(e,n,a){var i,o,r,s=t.head||t.getElementsByTagName("head")[0]||t.documentElement,l=t.createElement("script"),u=!1,d=[],c=/(=)\?(?=&|$)|\?\?/;a||(r=e.match(/(callback=[^&]*)/),null!==r&&r.length?(i=r[1].split("=")[1],"?"===i&&(i="jsonp"),o=g.guid(i),e=e.replace(/(callback=[^&]*)/,"callback="+o)):(o=g.guid("jsonp"),c.test(e)&&(e=e.replace(c,"$1"+o)),d=e.split(/\?(.+)?/),e=d[0]+"?",d[1]&&(e+=d[1]+"&"),e+="callback="+o),window[o]=function(e){n&&n(e),u=!0}),l.addEventListener("load",function(){a&&n&&n(),u&&delete window[o],s.removeChild(l)},!1),l.src=e,s.insertBefore(l,s.firstChild)},g.getJSONP=g.xhr.getJSONP,g.getScript=g.xhr.getScript=function(e,t){return g.xhr.getJSONP(e,t,!0)},g.util={toSeconds:function(e,t){var n,a,i,o,r,s,l=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,u="Invalid time format";return"number"==typeof e?e:("string"!=typeof e||l.test(e)||g.error(u),n=e.split(":"),a=n.length-1,i=n[a],i.indexOf(";")>-1&&(r=i.split(";"),s=0,t&&"number"==typeof t&&(s=parseFloat(r[1],10)/t),n[a]=parseInt(r[0],10)+s),o=n[0],{1:parseFloat(o,10),2:60*parseInt(o,10)+parseFloat(n[1],10),3:3600*parseInt(o,10)+60*parseInt(n[1],10)+parseFloat(n[2],10)}[n.length||1])}},g.p.cue=g.p.exec,g.protect={natives:h(g.p).map(function(e){return e.toLowerCase()})},g.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(e,t){var n=g.p[t];g.p[t]=function(){return"undefined"!=typeof console&&console.warn&&(console.warn("Deprecated method '"+t+"', "+(null==e?"do not use.":"use '"+e+"' instead.")),g.p[t]=n),g.p[e].apply(this,[].slice.call(arguments))}}),e.Popcorn=g}else{e.Popcorn={isSupported:!1};for(var E="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);E.length;)e.Popcorn[E.shift()]=function(){}}}(window,window.document),/*!
 * Popcorn.sequence
 *
 * Copyright 2011, Rick Waldron
 * Licensed under MIT license.
 *
 */
function(e,t){var n=e.document,a=e.location,i=/:\/\//,o=a.href.replace(a.href.split("/").slice(-1)[0],""),r=function(e,t,n){e=e||0,t=(t||e||0)+1,n=n||1;var a=Math.ceil((t-e)/n)||0,i=0,o=[];for(o.length=a;a>i;)o[i++]=e,e+=n;return o};t.sequence=function(e,n){return new t.sequence.init(e,n)},t.sequence.init=function(e,a){this.parent=n.getElementById(e),this.seqId=t.guid("__sequenced"),this.queue=[],this.playlist=[],this.inOuts={ofVideos:[],ofClips:[]},this.dims={width:0,height:0},this.active=0,this.cycling=!1,this.playing=!1,this.times={last:0},this.events={};var r=this,s=0;return t.forEach(a,function(a,s){var l=n.createElement("video");l.preload="auto",l.controls=!0,l.style.display=s&&"none"||"",l.id=r.seqId+"-"+s,r.queue.push(l);var u=a["in"],d=a.out;r.inOuts.ofVideos.push({"in":void 0!==u&&u||1,out:void 0!==d&&d||0}),r.inOuts.ofVideos[s].out=r.inOuts.ofVideos[s].out||r.inOuts.ofVideos[s]["in"]+2,l.src=i.test(a.src)?a.src:o+a.src,l.setAttribute("data-sequence-owner",e),l.setAttribute("data-sequence-guid",r.seqId),l.setAttribute("data-sequence-id",s),l.setAttribute("data-sequence-clip",[r.inOuts.ofVideos[s]["in"],r.inOuts.ofVideos[s].out].join(":")),r.parent.appendChild(l),r.playlist.push(t("#"+l.id))}),r.inOuts.ofVideos.forEach(function(e){var t=e.out-e["in"],n={"in":s,out:s+t};r.inOuts.ofClips.push(n),s=n.out+1}),t.forEach(this.queue,function(e,n){function a(){return n||(r.dims.width=e.videoWidth,r.dims.height=e.videoHeight),e.currentTime=r.inOuts.ofVideos[n]["in"]-.5,e.removeEventListener("canplaythrough",a,!1),!0}e.addEventListener("canplaythrough",a,!1),e.addEventListener("play",function(){r.playing=!0},!1),e.addEventListener("pause",function(){r.playing=!1},!1),e.addEventListener("timeupdate",function(n){var a=n.srcElement||n.target,i=+(a.dataset&&a.dataset.sequenceId||a.getAttribute("data-sequence-id")),o=Math.floor(e.currentTime);r.times.last!==o&&i===r.active&&(r.times.last=o,o===r.inOuts.ofVideos[i].out&&t.sequence.cycle.call(r,i))},!1)}),this},t.sequence.init.prototype=t.sequence.prototype,t.sequence.cycle=function(e){this.queue||t.error("Popcorn.sequence.cycle is not a public method");var n,a,i,o,r=this.queue,s=this.inOuts.ofVideos,l=r[e],u=0;return r[e+1]&&(u=e+1),r[e+1]?(n=r[u],a=s[u],t.extend(n,{width:this.dims.width,height:this.dims.height}),i=this.playlist[u],o=this.playlist[e],l.pause(),this.active=u,this.times.last=a["in"]-1,i.currentTime(a["in"]),i[u?"play":"pause"](),this.trigger("cycle",{position:{previous:e,current:u}}),u&&(l.style.display="none",n.style.display=""),this.cycling=!1):(u=0,this.playlist[e].pause()),this};var s=["timeupdate","play","pause"];t.extend(t.sequence.prototype,{eq:function(e){return this.playlist[e]},remove:function(){this.parent.innerHTML=null},clip:function(e){return this.inOuts.ofVideos[e]},duration:function(){for(var e=0,t=this.inOuts.ofClips,n=0;n<t.length;n++)e+=t[n].out-t[n]["in"]+1;return e-1},play:function(){return this.playlist[this.active].play(),this},exec:function(e,n){var a=this.active;return this.inOuts.ofClips.forEach(function(t,n){e>=t["in"]&&e<=t.out&&(a=n)}),e+=this.inOuts.ofVideos[a]["in"]-this.inOuts.ofClips[a]["in"],t.addTrackEvent(this.playlist[a],{start:e-1,end:e,_running:!1,_natives:{start:n||t.nop,end:t.nop,type:"exec"}}),this},listen:function(e,n){var a,i=this,o=this.playlist,r=o.length,l=0;return n||(n=t.nop),t.Events.Natives.indexOf(e)>-1?t.forEach(o,function(t){t.listen(e,function(a){a.active=i,s.indexOf(e)>-1?n.call(t,a):++l===r&&n.call(t,a)})}):(this.events[e]||(this.events[e]={}),a=n.name||t.guid("__"+e),this.events[e][a]=n),this},unlisten:function(){},trigger:function(e,n){var a=this;if(!(t.Events.Natives.indexOf(e)>-1))return this.events[e]&&t.forEach(this.events[e],function(t){t.call(a,{type:e},n)}),this}}),t.forEach(t.manifest,function(e,n){t.sequence.prototype[n]=function(e){var a,i,o,s,l,u,d,c,p,f={},m=[];for(a=0;a<this.inOuts.ofClips.length;a++)i=this.inOuts.ofClips[a],o=r(i["in"],i.out),s=o.indexOf(e.start),l=o.indexOf(e.end),s>-1&&(f[a]=t.extend({},i,{start:o[s],clipIdx:s})),l>-1&&(f[a]=t.extend({},i,{end:o[l],clipIdx:l}));for(u=Object.keys(f).map(function(e){return+e}),m=r(u[0],u[1]),a=0;a<m.length;a++){var h={},g=m[a],y=f[g];y?(d=this.inOuts.ofVideos[g],c=y.clipIdx,p=r(d["in"],d.out),y.start&&(h.start=p[c],h.end=p[p.length-1]),y.end&&(h.start=p[0],h.end=p[c])):(h.start=this.inOuts.ofVideos[g]["in"],h.end=this.inOuts.ofVideos[g].out),this.playlist[g][n](t.extend({},e,h))}return this}})}(this,Popcorn),function(e){document.addEventListener("DOMContentLoaded",function(){var t="data-timeline-sources",n=document.querySelectorAll("["+t+"]");e.forEach(n,function(a,i){var o,r,s,l=n[i];l.id||(l.id=e.guid("__popcorn")),l.nodeType&&1===l.nodeType&&(s=e("#"+l.id),o=(l.getAttribute(t)||"").split(","),o[0]&&e.forEach(o,function(e){r=e.split("!"),1===r.length&&(r=e.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split("."),r[0]="parse"+r[1].toUpperCase(),r[1]=e),o[0]&&s[r[0]]&&s[r[0]](r[1])}),s.autoplay()&&s.play())})},!1)}(Popcorn),function(e,t){function n(e){var t="string"==typeof e?e:[e.language,e.region].join("-"),n=t.split("-");return{iso6391:t,language:n[0]||"",region:n[1]||""}}var a=e.navigator,i=n(a.userLanguage||a.language);t.locale={get:function(){return i},set:function(e){return i=n(e),t.locale.broadcast(),i},broadcast:function(e){var n,a=t.instances,i=a.length,o=0;for(e=e||"locale:changed";i>o;o++)n=a[o],e in n.data.events&&n.trigger(e)}}}(this,this.Popcorn),function(e){var t=Array.prototype,n=Object.prototype,a=(t.forEach,t.slice,n.hasOwnProperty);n.toString,e.parsers={},e.parser=function(t,n,i){if(e.protect.natives.indexOf(t.toLowerCase())>=0)return e.error("'"+t+"' is a protected function name"),void 0;if("function"!=typeof n||i||(i=n,n=""),"function"==typeof i&&"string"==typeof n){var o,r=(e.events.all,{});return o=function(t,o){if(!t)return this;var r=this;return e.xhr({url:t,dataType:n,success:function(e){var t,n,s,l=i(e),u=0;if(t=l.data||[],n=t.length,s=null,n){for(;n>u;u++){s=t[u];for(var d in s)a.call(s,d)&&r[d]&&r[d](s[d])}o&&o()}}}),this},r[t]=o,e.extend(e.p,r),r}}}(Popcorn),function(e){var t=function(t,n){return t=t||e.nop,n=n||e.nop,function(){t.apply(this,arguments),n.apply(this,arguments)}},n="ogg|oga|aac|mp3|wav",a="ogg|ogv|mp4|webm",i=n+"|"+a,o=new RegExp("^.*\\.("+n+")($|\\?)"),r=new RegExp("^.*\\.("+i+")($|\\?)");e.player=function(n,a){if(!e[n]){a=a||{};var i=function(n,i,o){o=o||{};var r,s,l=new Date/1e3,u=l,d=0,c=0,p=1,f=!1,m={},h="string"==typeof n?e.dom.find(n):n,g={};Object.prototype.__defineGetter__||(g=h||document.createElement("div"));for(var y in h)y in g||("object"==typeof h[y]?g[y]=h[y]:"function"==typeof h[y]?g[y]=function(e){return"length"in h[e]&&!h[e].call?h[e]:function(){return h[e].apply(h,arguments)}}(y):e.player.defineProperty(g,y,{get:function(e){return function(){return h[e]}}(y),set:e.nop,configurable:!0}));var v=function(){l=new Date/1e3,g.paused||(g.currentTime=g.currentTime+(l-u),g.dispatchEvent("timeupdate"),r=setTimeout(v,10)),u=l};return g.play=function(){this.paused=!1,g.readyState>=4&&(u=new Date/1e3,g.dispatchEvent("play"),v())},g.pause=function(){this.paused=!0,g.dispatchEvent("pause")},e.player.defineProperty(g,"currentTime",{get:function(){return d},set:function(e){return d=+e,g.dispatchEvent("timeupdate"),d},configurable:!0}),e.player.defineProperty(g,"volume",{get:function(){return p},set:function(e){return p=+e,g.dispatchEvent("volumechange"),p},configurable:!0}),e.player.defineProperty(g,"muted",{get:function(){return f},set:function(e){return f=+e,g.dispatchEvent("volumechange"),f},configurable:!0}),e.player.defineProperty(g,"readyState",{get:function(){return c},set:function(e){return c=e},configurable:!0}),g.addEventListener=function(e,t){return m[e]||(m[e]=[]),m[e].push(t),t},g.removeEventListener=function(e,t){var n,a=m[e];if(a){for(n=m[e].length-1;n>=0;n--)t===a[n]&&a.splice(n,1);return t}},g.dispatchEvent=function(t){var n,a,i=this,o=t.type;if(o||(o=t,a=e.events.getInterface(o),a&&(n=document.createEvent(a),n.initEvent(o,!0,!0,window,1))),m[o])for(var r=m[o].length-1;r>=0;r--)m[o][r].call(i,n,i)},g.src=i||"",g.duration=0,g.paused=!0,g.ended=0,o&&o.events&&e.forEach(o.events,function(e,t){g.addEventListener(t,e,!1)}),a._canPlayType(h.nodeName,i)!==!1?a._setup?a._setup.call(g,o):(g.readyState=4,g.dispatchEvent("loadedmetadata"),g.dispatchEvent("loadeddata"),g.dispatchEvent("canplaythrough")):setTimeout(function(){g.dispatchEvent("error")},0),s=new e.p.init(g,o),a._teardown&&(s.destroy=t(s.destroy,function(){a._teardown.call(g,o)})),s};i.canPlayType=a._canPlayType=a._canPlayType||e.nop,e[n]=e.player.registry[n]=i}},e.player.registry={},e.player.defineProperty=Object.defineProperty||function(t,n,a){t.__defineGetter__(n,a.get||e.nop),t.__defineSetter__(n,a.set||e.nop)},e.player.playerQueue=function(){var e=[],t=!1;return{next:function(){t=!1,e.shift(),e[0]&&e[0]()},add:function(n){e.push(function(){t=!0,n&&n()}),!t&&e[0]()}}},e.smart=function(t,n,a){var i,s,l,u=["AUDIO","VIDEO"],d=e.dom.find(t),c=document.createElement("video"),p={ogg:"video/ogg",ogv:"video/ogg",oga:"audio/ogg",webm:"video/webm",mp4:"video/mp4",mp3:"audio/mp3"},f=function(e){return c.canPlayType(p[e])},m=function(e){return l=r.exec(e),l&&l[1]?f(l[1]):!1};if(!d)return e.error("Specified target "+t+" was not found."),void 0;if(u.indexOf(d.nodeName)>-1&&!n)return"object"==typeof n&&(a=n,n=void 0),e(d,a);for("string"==typeof n&&(n=[n]),s=0,srcLength=n.length;srcLength>s;s++){if(m(n[s])){n=n[s];break}for(var h in e.player.registry)if(e.player.registry.hasOwnProperty(h)&&e.player.registry[h].canPlayType(d.nodeName,n[s]))return e[h](d,n[s],a)}return-1===u.indexOf(d.nodeName)&&(i="string"==typeof n?n:n.length?n[0]:n,t=document.createElement(o.exec(i)?u[0]:u[1]),t.controls=!0,d.appendChild(t),d=t),a&&a.events&&a.events.error&&d.addEventListener("error",a.events.error,!1),d.src=n,e(d,a)}}(Popcorn),function(e){var t,n="http://popcornjs.org/code/modules/player/popcorn.player.js",a=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,i={},o={vimeo:!1,youtube:!1,soundcloud:!1,module:!1};Object.defineProperty(i,t,{get:function(){return o[t]},set:function(e){o[t]=e}}),e.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:!0},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:!0},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:!0},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:!0}}},_setup:function(t){function o(){function n(){"HTML5"===s||window.Popcorn[s]?(t.id=t._container.id,t._container.style.width=t.width+"px",t._container.style.height=t.height+"px",t.popcorn=e.smart("#"+t.id,t.source),"HTML5"===s&&t.popcorn.controls(!0),t._container.style.width="0px",t._container.style.height="0px",t._container.style.visibility="hidden",t._container.style.overflow="hidden"):setTimeout(function(){n()},300)}"HTML5"===s||window.Popcorn[s]||i[s]?n():(i[s]=!0,e.getScript("http://popcornjs.org/code/players/"+s+"/popcorn."+s+".js",function(){n()}))}function r(){window.Popcorn.player?o():setTimeout(function(){r()},300)}var s,l,u,d,c=document.getElementById(t.target)||{};d=a.exec(t.source),d?(s=d[1],"youtu"===s&&(s="youtube")):s="HTML5",t._type=s,t._container=document.createElement("div"),l=t._container,l.id="mediaSpawnerdiv-"+e.guid(),t.width=t.width||400,t.height=t.height||200,t.caption&&(u=document.createElement("div"),u.innerHTML=t.caption,u.style.display="none",t._capCont=u,l.appendChild(u)),c&&c.appendChild(l),window.Popcorn.player||i.module?r():(i.module=!0,e.getScript(n,r))},start:function(e,t){t._capCont&&(t._capCont.style.display=""),t._container.style.width=t.width+"px",t._container.style.height=t.height+"px",t._container.style.visibility="visible",t._container.style.overflow="visible",t.autoplay&&t.popcorn.play()},end:function(e,t){t._capCont&&(t._capCont.style.display="none"),t._container.style.width="0px",t._container.style.height="0px",t._container.style.visibility="hidden",t._container.style.overflow="hidden",t.popcorn.pause()},_teardown:function(e){e.popcorn&&e.popcorn.destory&&e.popcorn.destroy(),document.getElementById(e.target)&&document.getElementById(e.target).removeChild(e._container)}})}(Popcorn,this),function(e){e.plugin("code",function(t){var n=!1,a=this,i=function(){var e=function(e){return function(t,i){var o=function(){n&&t.call(a,i),n&&e(o)};o()}};return window.webkitRequestAnimationFrame?e(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?e(window.mozRequestAnimationFrame):e(function(e){window.setTimeout(e,16)})}();return t.onStart&&"function"==typeof t.onStart||(t.onStart=e.nop),t.onEnd&&"function"!=typeof t.onEnd&&(t.onEnd=void 0),t.onFrame&&"function"!=typeof t.onFrame&&(t.onFrame=void 0),{start:function(e,t){t.onStart.call(a,t),t.onFrame&&(n=!0,i(t.onFrame,t))},end:function(e,t){t.onFrame&&(n=!1),t.onEnd&&t.onEnd.call(a,t)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",optional:!0},onEnd:{elem:"input",type:"function",label:"onEnd"}}})}(Popcorn),function(e){var t=0;e.plugin("flickr",function(n){var a,i,o,r,s,l=document.getElementById(n.target),u=n.numberofimages||4,d=n.height||"50px",c=n.width||"50px",p=n.padding||"5px",f=n.border||"0px";a=document.createElement("div"),a.id="flickr"+t,a.style.width="100%",a.style.height="100%",a.style.display="none",t++,l&&l.appendChild(a);var m=function(){i?setTimeout(function(){m()},5):(o="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&",o+="username="+n.username+"&api_key="+n.apikey+"&format=json&jsoncallback=flickr",e.getJSONP(o,function(e){i=e.user.nsid,h()}))},h=function(){o="http://api.flickr.com/services/feeds/photos_public.gne?",i&&(o+="id="+i+"&"),n.tags&&(o+="tags="+n.tags+"&"),o+="lang=en-us&format=json&jsoncallback=flickr",e.xhr.getJSONP(o,function(t){var n=document.createElement("div");n.innerHTML="<p style='padding:"+p+";'>"+t.title+"<p/>",e.forEach(t.items,function(e,t){return u>t?(r=document.createElement("a"),r.setAttribute("href",e.link),r.setAttribute("target","_blank"),s=document.createElement("img"),s.setAttribute("src",e.media.m),s.setAttribute("height",d),s.setAttribute("width",c),s.setAttribute("style","border:"+f+";padding:"+p),r.appendChild(s),n.appendChild(r),void 0):!1}),a.appendChild(n)})};return n.username&&n.apikey?m():(i=n.userid,h()),{start:function(){a.style.display="inline"},end:function(){a.style.display="none"},_teardown:function(e){document.getElementById(e.target)&&document.getElementById(e.target).removeChild(a)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:!0},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:!0},apikey:{elem:"input",type:"text",label:"API Key",optional:!0},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:!0},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:!0},padding:{elem:"input",type:"text",label:"Padding",optional:!0},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:!0},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})}(Popcorn),function(e){e.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(t){var n=e.dom.find(t.target);t._container=document.createElement("div"),t._container.style.display="none",t._container.innerHTML=t.text,n.appendChild(t._container)},start:function(e,t){t._container.style.display="inline"},end:function(e,t){t._container.style.display="none"},_teardown:function(t){var n=e.dom.find(t.target);n&&n.removeChild(t._container)}})}(Popcorn),function(e){function t(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return i[e]||e})}function n(e){return e.replace(/\r?\n/gm,"<br>")}function a(e,t){var n=e.container=document.createElement("div"),a=n.style,i=e.media,o=function(){var t=e.position();a.fontSize="18px",a.width=i.offsetWidth+"px",a.top=t.top+i.offsetHeight-n.offsetHeight-40+"px",a.left=t.left+"px",setTimeout(o,10)};return n.id=t||"",a.position="absolute",a.color="white",a.textShadow="black 2px 2px 6px",a.fontWeight="bold",a.textAlign="center",o(),e.media.parentNode.appendChild(n),n}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};e.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(i){var o,r,s=i._container=document.createElement("div");s.style.display="none",i.target?(o=e.dom.find(i.target),o?["VIDEO","AUDIO"].indexOf(o.nodeName)>-1&&(o=a(this,i.target+"-overlay")):o=a(this,i.target)):o=this.container?this.container:a(this),i._target=o,r=i.escape?t(i.text):i.text,r=i.multiline?n(r):r,s.innerHTML=r||"",o.appendChild(s)},start:function(e,t){t._container.style.display="inline"},end:function(e,t){t._container.style.display="none"},_teardown:function(e){var t=e._target;t&&t.removeChild(e._container)}})}(Popcorn);var googleCallback;!function(e){function t(e,t,n){var a,i=e.type?e.type.toUpperCase():"HYBRID";("STAMEN-WATERCOLOR"===i||"STAMEN-TERRAIN"===i||"STAMEN-TONER"===i)&&(a=i.replace("STAMEN-","").toLowerCase());var o=new google.maps.Map(n,{mapTypeId:a?a:google.maps.MapTypeId[i],mapTypeControlOptions:{mapTypeIds:[]}});return a&&o.mapTypes.set(a,new google.maps.StamenMapType(a)),o.getDiv().style.display="none",o}var n,a,i=1,o=!1,r=!1;googleCallback=function(t){"undefined"!=typeof google&&google.maps&&google.maps.Geocoder&&google.maps.LatLng?(n=new google.maps.Geocoder,e.getScript("//maps.stamen.com/js/tile.stamen.js",function(){r=!0})):setTimeout(function(){googleCallback(t)},1)},a=function(){document.body?(o=!0,e.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")):setTimeout(function(){a()},1)},e.plugin("googlemap",function(e){var s,l,u,d=document.getElementById(e.target);e.type=e.type||"ROADMAP",e.zoom=e.zoom||1,e.lat=e.lat||0,e.lng=e.lng||0,o||a(),s=document.createElement("div"),s.id="actualmap"+i,s.style.width=e.width||"100%",s.style.height=e.height?e.height:d&&d.clientHeight?d.clientHeight+"px":"100%",i++,d&&d.appendChild(s);var c=function(){r?s&&(e.location?n.geocode({address:e.location},function(n,a){s&&a===google.maps.GeocoderStatus.OK&&(e.lat=n[0].geometry.location.lat(),e.lng=n[0].geometry.location.lng(),u=new google.maps.LatLng(e.lat,e.lng),l=t(e,u,s))}):(u=new google.maps.LatLng(e.lat,e.lng),l=t(e,u,s))):setTimeout(function(){c()},5)};return c(),{start:function(e,t){var n,a=this,i=function(){if(l){if(t._map=l,l.getDiv().style.display="block",google.maps.event.trigger(l,"resize"),l.setCenter(u),t.zoom&&"number"!=typeof t.zoom&&(t.zoom=+t.zoom),l.setZoom(t.zoom),t.heading&&"number"!=typeof t.heading&&(t.heading=+t.heading),t.pitch&&"number"!=typeof t.pitch&&(t.pitch=+t.pitch),"STREETVIEW"===t.type){l.setStreetView(n=new google.maps.StreetViewPanorama(s,{position:u,pov:{heading:t.heading=t.heading||0,pitch:t.pitch=t.pitch||0,zoom:t.zoom}}));var e=function(n,i){var s=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var i=a.media.currentTime;if("object"==typeof t.tween){for(var l=0,u=n.length;u>l;l++){var d=n[l];i>=d.interval*(l+1)/1e3&&(i<=d.interval*(l+2)/1e3||i>=d.interval*u/1e3)&&(m.setPosition(new google.maps.LatLng(d.position.lat,d.position.lng)),m.setPov({heading:d.pov.heading||s(d,n[l+1])||0,zoom:d.pov.zoom||0,pitch:d.pov.pitch||0}))}e(n,n[0].interval)}else{for(var c=0,p=n.length;p>c;c++){var f=t.interval;i>=f*(c+1)/1e3&&(f*(c+2)/1e3>=i||i>=f*p/1e3)&&(o.setPov({heading:s(n[c],n[c+1])||0,zoom:t.zoom,pitch:t.pitch||0}),o.setPosition(r[c]))}e(r,t.interval)}},i)};if(t.location&&"string"==typeof t.tween){var o=n,r=[],d=new google.maps.DirectionsService,c=new google.maps.DirectionsRenderer(o),p={origin:t.location,destination:t.tween,travelMode:google.maps.TravelMode.DRIVING};d.route(p,function(e,t){t==google.maps.DirectionsStatus.OK&&(c.setDirections(e),f(e,a))});var f=function(n){for(var a=n.routes[0].overview_path,i=0,o=a.length;o>i;i++)r.push(new google.maps.LatLng(a[i].lat(),a[i].lng()));t.interval=t.interval||1e3,e(r,10)}}else if("object"==typeof t.tween)for(var m=n,h=0,g=t.tween.length;g>h;h++)t.tween[h].interval=t.tween[h].interval||1e3,e(t.tween,10)}t.onmaploaded&&t.onmaploaded(t,l)}else setTimeout(function(){i()},13)};i()},end:function(){l&&(l.getDiv().style.display="none")},_teardown:function(e){var t=document.getElementById(e.target);t&&t.removeChild(s),s=l=u=null,e._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:!0},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:!0},lat:{elem:"input",type:"text",label:"Lat",optional:!0},lng:{elem:"input",type:"text",label:"Lng",optional:!0},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:!0},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:!0}}})}(Popcorn),function(e){function t(e){function t(){var t=e.getBoundingClientRect(),n=o.getBoundingClientRect();n.left!==t.left&&(o.style.left=t.left+"px"),n.top!==t.top&&(o.style.top=t.top+"px")}var i=-1,o=document.createElement("div"),r=getComputedStyle(e).zIndex;return o.setAttribute("data-popcorn-helper-container",!0),o.style.position="absolute",o.style.zIndex=isNaN(r)?n:r+1,document.body.appendChild(o),{element:o,start:function(){i=setInterval(t,a)},stop:function(){clearInterval(i),i=-1},destroy:function(){document.body.removeChild(o),-1!==i&&clearInterval(i)}}}var n=2e3,a=10;e.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",optional:!0},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:!0}}},_setup:function(n){var a=document.createElement("img"),i=document.getElementById(n.target);n.anchor=document.createElement("a"),n.anchor.style.position="relative",n.anchor.style.textDecoration="none",n.anchor.style.display="none",i&&(["VIDEO","AUDIO"].indexOf(i.nodeName)>-1?(n.trackedContainer=t(i),n.trackedContainer.element.appendChild(n.anchor)):i&&i.appendChild(n.anchor)),a.addEventListener("load",function(){a.style.borderStyle="none",n.anchor.href=n.href||n.src||"#",n.anchor.target="_blank";var t,o;a.style.height=i.style.height,a.style.width=i.style.width,n.anchor.appendChild(a),n.text&&(t=a.height/12+"px",o=document.createElement("div"),e.extend(o.style,{color:"black",fontSize:t,fontWeight:"bold",position:"relative",textAlign:"center",width:a.style.width||a.width+"px",zIndex:"10"}),o.innerHTML=n.text||"",o.style.top=(a.style.height.replace("px","")||a.height)/2-o.offsetHeight/2+"px",n.anchor.insertBefore(o,a))},!1),a.src=n.src},start:function(e,t){t.anchor.style.display="inline",t.trackedContainer&&t.trackedContainer.start()},end:function(e,t){t.anchor.style.display="none",t.trackedContainer&&t.trackedContainer.stop()},_teardown:function(e){e.trackedContainer?e.trackedContainer.destroy():e.anchor.parentNode&&e.anchor.parentNode.removeChild(e.anchor)}})}(Popcorn),function(e){var t=1,n=!1;e.plugin("googlefeed",function(a){var i=function(){var t=!1,a=0,i=document.getElementsByTagName("link"),o=i.length,r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("link"),l="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.";for(window.GFdynamicFeedControl?n=!0:e.getScript(l+"js",function(){n=!0});o>a;a++)i[a].href===l+"css"&&(t=!0);t||(s.type="text/css",s.rel="stylesheet",s.href=l+"css",r.insertBefore(s,r.firstChild))};window.google?i():e.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){i()}})});var o=document.createElement("div"),r=document.getElementById(a.target),s=function(){n?a.feed=new GFdynamicFeedControl(a.url,o,{vertical:"vertical"===a.orientation.toLowerCase()?!0:!1,horizontal:"horizontal"===a.orientation.toLowerCase()?!0:!1,title:a.title=a.title||"Blog"}):setTimeout(function(){s()},5)};return(!a.orientation||"vertical"!==a.orientation.toLowerCase()&&"horizontal"!==a.orientation.toLowerCase())&&(a.orientation="vertical"),o.style.display="none",o.id="_feed"+t,o.style.width="100%",o.style.height="100%",t++,r&&r.appendChild(o),s(),{start:function(){o.setAttribute("style","display:inline")},end:function(){o.setAttribute("style","display:none")},_teardown:function(e){document.getElementById(e.target)&&document.getElementById(e.target).removeChild(o),delete e.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",label:"Title","default":"Planet Mozilla",optional:!0},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:!0}}})}(Popcorn),function(e){var t=0,n=function(t,n){var a=t.container=document.createElement("div"),i=a.style,o=t.media,r=function(){var e=t.position();i.fontSize="18px",i.width=o.offsetWidth+"px",i.top=e.top+o.offsetHeight-a.offsetHeight-40+"px",i.left=e.left+"px",setTimeout(r,10)};return a.id=n||e.guid(),i.position="absolute",i.color="white",i.textShadow="black 2px 2px 6px",i.fontWeight="bold",i.textAlign="center",r(),t.media.parentNode.appendChild(a),a};e.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(e){var a=document.createElement("div");a.id="subtitle-"+t++,a.style.display="none",!this.container&&(!e.target||"subtitle-container"===e.target)&&n(this),e.container=e.target&&"subtitle-container"!==e.target?document.getElementById(e.target)||n(this,e.target):this.container,document.getElementById(e.container.id)&&document.getElementById(e.container.id).appendChild(a),e.innerContainer=a,e.showSubtitle=function(){e.innerContainer.innerHTML=e.text||""}},start:function(e,t){t.innerContainer.style.display="inline",t.showSubtitle(t,t.text)},end:function(e,t){t.innerContainer.style.display="none",t.innerContainer.innerHTML=""},_teardown:function(e){e.container.removeChild(e.innerContainer)}})}(Popcorn),function(e){var t=!1;e.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:!0},width:{elem:"input",type:"number",label:"Width","default":"250",optional:!0}}},_setup:function(n){window.TWTR||t||(t=!0,e.getScript("//widgets.twimg.com/j/2/widget.js"));var a=document.getElementById(n.target);n.container=document.createElement("div"),n.container.setAttribute("id",e.guid()),n.container.style.display="none",a&&a.appendChild(n.container);var i=n.src||"",o=n.width||250,r=n.height||200,s=/^@/.test(i),l={version:2,id:n.container.getAttribute("id"),rpp:30,width:o,height:r,interval:6e3,theme:{shell:{background:"#ffffff",color:"#000000"},tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:!0,timestamp:!0,avatars:!0,hashtags:!0,toptweets:!0,live:!0,scrollbar:!1,behavior:"default"}},u=function(e){window.TWTR?s?(l.type="profile",new TWTR.Widget(l).render().setUser(i).start()):(l.type="search",l.search=i,l.subject=i,new TWTR.Widget(l).render().start()):setTimeout(function(){u(e)},1)};u(this)},start:function(e,t){t.container.style.display="inline"},end:function(e,t){t.container.style.display="none"},_teardown:function(e){document.getElementById(e.target)&&document.getElementById(e.target).removeChild(e.container)}})}(Popcorn),function(e){e.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:!0},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(e){var t=document.getElementById(e.target);e.src=e.src.replace(/^(https?:)?(\/\/)?/,"//"),e._iframe=document.createElement("iframe"),e._iframe.setAttribute("width","100%"),e._iframe.setAttribute("height","100%"),e._iframe.id=e.id,e._iframe.src=e.src,e._iframe.style.display="none",t&&t.appendChild(e._iframe)},start:function(e,t){t._iframe.src=t.src,t._iframe.style.display="inline"},end:function(e,t){t._iframe.style.display="none"},_teardown:function(e){document.getElementById(e.target)&&document.getElementById(e.target).removeChild(e._iframe)}})}(Popcorn);var wikiCallback;!function(e){e.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:!0},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:!0},numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:!0},target:"wikipedia-container"}},_setup:function(t){var n,a=e.guid();t.lang||(t.lang="en"),t.numberofwords=t.numberofwords||200,window["wikiCallback"+a]=function(e){t._link=document.createElement("a"),t._link.setAttribute("href",t.src),t._link.setAttribute("target","_blank"),t._link.innerHTML=t.title||e.parse.displaytitle,t._desc=document.createElement("p"),n=e.parse.text["*"].substr(e.parse.text["*"].indexOf("<p>")),n=n.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,""),n=n.split(" "),t._desc.innerHTML=n.slice(0,n.length>=t.numberofwords?t.numberofwords:n.length).join(" ")+" ...",t._fired=!0},t.src&&e.getScript("//"+t.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+t.src.slice(t.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+a)},start:function(e,t){var n=function(){t._fired?t._link&&t._desc&&document.getElementById(t.target)&&(document.getElementById(t.target).appendChild(t._link),document.getElementById(t.target).appendChild(t._desc),t._added=!0):setTimeout(function(){n()
},13)};n()},end:function(e,t){t._added&&(document.getElementById(t.target).removeChild(t._link),document.getElementById(t.target).removeChild(t._desc))},_teardown:function(e){e._added&&(e._link.parentNode&&document.getElementById(e.target).removeChild(e._link),e._desc.parentNode&&document.getElementById(e.target).removeChild(e._desc),delete e.target)}})}(Popcorn),function(e){e.plugin("mustache",function(t){var n,a,i,o;e.getScript("http://mustache.github.com/extras/mustache.js");var r=!!t.dynamic,s=typeof t.template,l=typeof t.data,u=document.getElementById(t.target);return t.container=u||document.createElement("div"),"function"===s?r?i=t.template:o=t.template(t):o="string"===s?t.template:"","function"===l?r?n=t.data:a=t.data(t):a="string"===l?JSON.parse(t.data):"object"===l?t.data:"",{start:function(e,t){var r=function(){if(window.Mustache){n&&(a=n(t)),i&&(o=i(t));var e=Mustache.to_html(o,a).replace(/^\s*/gm,"");t.container.innerHTML=e}else setTimeout(function(){r()},10)};r()},end:function(e,t){t.container.innerHTML=""},_teardown:function(){n=a=i=o=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":!0}}})}(Popcorn),function(e){function t(e,n){return e.map?(e.map.div.style.display=n,void 0):(setTimeout(function(){t(e,n)},10),void 0)}var n=1;e.plugin("openmap",function(a){var i,o,r,s,l,u,d,c,p=document.getElementById(a.target);return i=document.createElement("div"),i.id="openmapdiv"+n,i.style.width="100%",i.style.height="100%",n++,p&&p.appendChild(i),c=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){switch(a.location?(location=new OpenLayers.LonLat(0,0),e.getJSONP("//tinygeocoder.com/create-api.php?q="+a.location+"&callback=jsonp",function(e){o=new OpenLayers.LonLat(e[1],e[0])})):o=new OpenLayers.LonLat(a.lng,a.lat),a.type=a.type||"ROADMAP",a.type){case"SATELLITE":a.map=new OpenLayers.Map({div:i,maxResolution:.28125,tileSize:new OpenLayers.Size(512,512)});var t=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});a.map.addLayer(t),s=new OpenLayers.Projection("EPSG:4326"),r=new OpenLayers.Projection("EPSG:4326");break;case"TERRAIN":s=new OpenLayers.Projection("EPSG:4326"),r=new OpenLayers.Projection("EPSG:4326"),a.map=new OpenLayers.Map({div:i,projection:r});var n=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});a.map.addLayer(n);break;case"STAMEN-TONER":case"STAMEN-WATERCOLOR":case"STAMEN-TERRAIN":var l=a.type.replace("STAMEN-","").toLowerCase(),u=new OpenLayers.Layer.Stamen(l);s=new OpenLayers.Projection("EPSG:4326"),r=new OpenLayers.Projection("EPSG:900913"),o=o.transform(s,r),a.map=new OpenLayers.Map({div:i,projection:r,displayProjection:s,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]}),a.map.addLayer(u);break;default:r=new OpenLayers.Projection("EPSG:900913"),s=new OpenLayers.Projection("EPSG:4326"),o=o.transform(s,r),a.map=new OpenLayers.Map({div:i,projection:r,displayProjection:s});var d=new OpenLayers.Layer.OSM;a.map.addLayer(d)}a.map&&(a.map.setCenter(o,a.zoom||10),a.map.div.style.display="none")}else setTimeout(function(){c()},50)},c(),{_setup:function(t){window.OpenLayers||e.getScript("//openlayers.org/api/OpenLayers.js",function(){e.getScript("//maps.stamen.com/js/tile.stamen.js")});var n=function(){if(t.map){if(t.zoom=t.zoom||2,t.zoom&&"number"!=typeof t.zoom&&(t.zoom=+t.zoom),t.map.setCenter(o,t.zoom),t.markers){var a=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),i=function(e){clickedFeature=e.feature,clickedFeature.attributes.text&&(d=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,!0,function(){u.unselect(this.feature)}),clickedFeature.popup=d,d.feature=clickedFeature,t.map.addPopup(d))},c=function(e){feature=e.feature,feature.popup&&(d.feature=null,t.map.removePopup(feature.popup),feature.popup.destroy(),feature.popup=null)},p=function(t){e.getJSONP("//tinygeocoder.com/create-api.php?q="+t.location+"&callback=jsonp",function(e){var n=new OpenLayers.Geometry.Point(e[1],e[0]).transform(s,r),i=OpenLayers.Util.extend({},a);(!t.size||isNaN(t.size))&&(t.size=14),i.pointRadius=t.size,i.graphicOpacity=1,i.externalGraphic=t.icon;var o=new OpenLayers.Feature.Vector(n,null,i);t.text&&(o.attributes={text:t.text}),l.addFeatures([o])})};l=new OpenLayers.Layer.Vector("Point Layer",{style:a}),t.map.addLayer(l);for(var f=0,m=t.markers.length;m>f;f++){var h=t.markers[f];if(h.text&&(u||(u=new OpenLayers.Control.SelectFeature(l),t.map.addControl(u),u.activate(),l.events.on({featureselected:i,featureunselected:c}))),h.location){var g=p;g(h)}else{var y=new OpenLayers.Geometry.Point(h.lng,h.lat).transform(s,r),v=OpenLayers.Util.extend({},a);(!h.size||isNaN(h.size))&&(h.size=14),v.pointRadius=h.size,v.graphicOpacity=1,v.externalGraphic=h.icon;var b=new OpenLayers.Feature.Vector(y,null,v);h.text&&(b.attributes={text:h.text}),l.addFeatures([b])}}}}else setTimeout(function(){n()},13)};n()},start:function(e,n){t(n,"block")},end:function(e,n){t(n,"none")},_teardown:function(){p&&p.removeChild(i),i=map=o=r=s=l=u=d=null}}},{about:{name:"Popcorn OpenMap Plugin",version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:!0},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:!0},lng:{elem:"input",type:"text",label:"Lng",optional:!0},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:!0}}})}(Popcorn),document.addEventListener("click",function(e){var t=e.target;("A"===t.nodeName||t.parentNode&&"A"===t.parentNode.nodeName)&&Popcorn.instances.forEach(function(e){e.options.pauseOnLinkClicked&&e.pause()})},!1),function(e){var t,n={},a=0,i=function(e){n[e]=document.createElement("div");var t=document.getElementById(e);return t&&t.appendChild(n[e]),n[e].style.height="100%",n[e].style.position="relative",n[e]},o=document.createElement("span"),r=["webkit","Moz","ms","O",""],s=["Transform","TransitionDuration","TransitionTimingFunction"],l={};document.getElementsByTagName("head")[0].appendChild(o);for(var u=0,d=s.length;d>u;u++)for(var c=0,p=r.length;p>c;c++)if(t=r[c]+s[u],t in o.style){l[s[u].toLowerCase()]=t;break}document.getElementsByTagName("head")[0].appendChild(o),e.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:!0}}},_setup:function(e){e._duration=e.end-e.start,e._container=n[e.target]||i(e.target),e.word=document.createElement("span"),e.word.style.position="absolute",e.word.style.whiteSpace="nowrap",e.word.style.opacity=0,e.word.style.MozTransitionProperty="opacity, -moz-transform",e.word.style.webkitTransitionProperty="opacity, -webkit-transform",e.word.style.OTransitionProperty="opacity, -o-transform",e.word.style.transitionProperty="opacity, transform",e.word.style[l.transitionduration]="1s, "+e._duration+"s",e.word.style[l.transitiontimingfunction]="linear",e.word.innerHTML=e.text,e.word.style.color=e.color||"black"},start:function(e,t){t._container.appendChild(t.word),t.word.style[l.transform]="",t.word.style.fontSize=~~(30+20*Math.random())+"px",a%=t._container.offsetWidth-t.word.offsetWidth,t.word.style.left=a+"px",a+=t.word.offsetWidth+10,t.word.style[l.transform]="translateY("+(t._container.offsetHeight-t.word.offsetHeight)+"px)",t.word.style.opacity=1,setTimeout(function(){t.word.style.opacity=0},1e3*(t.end-t.start-1||1))},end:function(e,t){t.word.style.opacity=0},_teardown:function(e){var t=document.getElementById(e.target);e.word.parentNode&&e._container.removeChild(e.word),n[e.target]&&!n[e.target].childElementCount&&t&&t.removeChild(n[e.target])&&delete n[e.target]}})}(Popcorn),function(e){var t=1;e.plugin("timeline",function(e){var n,a=document.getElementById(e.target),i=document.createElement("div"),o=!0;return a&&!a.firstChild?(a.appendChild(n=document.createElement("div")),n.style.width="inherit",n.style.height="inherit",n.style.overflow="auto"):n=a.firstChild,i.style.display="none",i.id="timelineDiv"+t,e.direction=e.direction||"up","down"===e.direction.toLowerCase()&&(o=!1),a&&n&&(o?n.insertBefore(i,n.firstChild):n.appendChild(i)),t++,i.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+e.title+"</span><br />"+"<span id='mid' style='font-size: 16px;'>"+e.text+"</span><br />"+e.innerHTML,{start:function(e,t){i.style.display="block","down"===t.direction&&(n.scrollTop=n.scrollHeight)},end:function(){i.style.display="none"},_teardown:function(){n&&i&&n.removeChild(i)&&!n.firstChild&&a.removeChild(n)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:!0},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:!0}}})}(Popcorn),function(e,t){var n={};e.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:!0},height:{elem:"input",type:"text",label:"Height",optional:!0},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},preload:{elem:"input",type:"checkbox",label:"Preload","default":!0},page:{elem:"input",type:"number",label:"Page Number",optional:!0},aid:{elem:"input",type:"number",label:"Annotation Id",optional:!0}}},_setup:function(a){function i(){function i(e){a._key=e.api.getId(),a._changeView=function(e){a.aid?e.pageSet.showAnnotation(e.api.getAnnotation(a.aid)):e.api.setCurrentPage(a.page)}}function o(t){var o=!1;return e.forEach(r.viewers,function(e){if(e.api.getSchema().canonicalURL===t){var s;i(e),s=n[a._key],a._containerId=s.id,s.num+=1,o=!0,r.loaded=!0}}),o}function l(){var e={num:1,id:a._containerId};n[a._key]=e,r.loaded=!0}r.loaded=!1;var u,d=a.url.replace(/\.html$/,".js"),c=a.target,p=t.getElementById(c),f=t.createElement("div"),m=e.position(p),h=a.width||m.width,g=a.height||m.height,y=a.sidebar||!0,v=a.text||!0,b=a.pdf||!0,E=a.showAnnotations||!0,w=a.zoom||700,x=a.search||!0;if(a.page,!o(a.url)){f.id=a._containerId=e.guid(c),u="#"+f.id,p.appendChild(f),s.trigger("documentready");var T=a.page||a.aid?function(e){i(e),a._changeView(e),f.style.visibility="hidden",e.elements.pages.hide(),l()}:function(e){i(e),l(),f.style.visibility="hidden",e.elements.pages.hide()};r.load(d,{width:h,height:g,sidebar:y,text:v,pdf:b,showAnnotations:E,zoom:w,search:x,container:u,afterLoad:T})}}function o(){window.DV.loaded?i():setTimeout(o,25)}var r=window.DV=window.DV||{},s=this;if(r.loading)o();else{r.loading=!0,r.recordHit="//www.documentcloud.org/pixel.gif";var l=t.createElement("link"),u=t.getElementsByTagName("head")[0];l.rel="stylesheet",l.type="text/css",l.media="screen",l.href="//s3.documentcloud.org/viewer/viewer-datauri.css",u.appendChild(l),r.loaded=!1,e.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){r.loading=!1,i()})}},start:function(e,n){var a=t.getElementById(n._containerId),i=DV.viewers[n._key];(n.page||n.aid)&&i&&n._changeView(i),a&&i&&(a.style.visibility="visible",i.elements.pages.show())},end:function(e,n){var a=t.getElementById(n._containerId);a&&DV.viewers[n._key]&&(a.style.visibility="hidden",DV.viewers[n._key].elements.pages.hide())},_teardown:function(e){var a=t.getElementById(e._containerId),i=e._key;if(i&&DV.viewers[i]&&0===--n[i].num){for(DV.viewers[i].api.unload();a.hasChildNodes();)a.removeChild(a.lastChild);a.parentNode.removeChild(a)}}})}(Popcorn,window.document),function(e){e.parser("parseJSON","JSON",function(t){var n={title:"",remote:"",data:[]},a=t;return e.forEach(a.data,function(e){n.data.push(e)}),n})}(Popcorn),function(e){e.parser("parseSBV",function(e){var t,n={title:"",remote:"",data:[]},a=[],i=0,o=0,r=function(e){var t,n=e.split(":"),a=n.length-1;try{t=60*parseInt(n[a-1],10)+parseFloat(n[a],10),2===a&&(t+=3600*parseInt(n[0],10))}catch(i){throw"Bad cue"}return t},s=function(e,t){var n={};return n[e]=t,n};for(t=e.text.split(/(?:\r\n|\r|\n)/gm),o=t.length;o>i;){var l={},u=[],d=t[i++].split(",");try{for(l.start=r(d[0]),l.end=r(d[1]);o>i&&t[i];)u.push(t[i++]);l.text=u.join("<br />"),a.push(s("subtitle",l))}catch(c){for(;o>i&&t[i];)i++}for(;o>i&&!t[i];)i++}return n.data=a,n})}(Popcorn),function(e){function t(e,t){var n={};return n[e]=t,n}function n(e){var t=e.split(":");try{var n=t[2].split(",");return 1===n.length&&(n=t[2].split(".")),3600*parseFloat(t[0],10)+60*parseFloat(t[1],10)+parseFloat(n[0],10)+parseFloat(n[1],10)/1e3}catch(a){return 0}}function a(e){for(var t=e.length-1;t>=0&&!e[t];)t--;return t}e.parser("parseSRT",function(e){var i,o,r,s,l,u={title:"",remote:"",data:[]},d=[],c=0,p=0;for(i=e.text.split(/(?:\r\n|\r|\n)/gm),s=a(i)+1,c=0;s>c;c++){for(l={},r=[],l.id=parseInt(i[c++],10),o=i[c++].split(/[\t ]*-->[\t ]*/),l.start=n(o[0]),p=o[1].indexOf(" "),-1!==p&&(o[1]=o[1].substr(0,p)),l.end=n(o[1]);s>c&&i[c];)r.push(i[c++]);l.text=r.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),l.text=l.text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),l.text=l.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>"),l.text=l.text.replace(/\\N/gi,"<br />"),d.push(t("subtitle",l))}return u.data=d,u})}(Popcorn),function(e){function t(e,t){var i,o=e.substr(10).split(","),r=/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,s=/\\N/gi;if(i={start:n(o[t.start]),end:n(o[t.end])},-1===i.start||-1===i.end)throw"Invalid time";return i.text=a(o,t.text).replace(r,"").replace(s,"<br />"),i}function n(e){var t=e.split(":");return 10!==e.length||t.length<3?-1:3600*parseInt(t[0],10)+60*parseInt(t[1],10)+parseFloat(t[2],10)}function a(e,t){for(var n=e.length,a=[],i=t;n>i;i++)a.push(e[i]);return a.join(",")}function i(e,t){var n={};return n[e]=t,n}function o(e){var t,n,a=e.substr(8).split(", "),i={};for(n=0,t=a.length;t>n;n++)"Start"===a[n]?i.start=n:"End"===a[n]?i.end=n:"Text"===a[n]&&(i.text=n);return i}e.parser("parseSSA",function(e){var n,a,r,s={title:"",remote:"",data:[]},l=/(?:\r\n|\r|\n)/gm,u=[],d=0;for(n=e.text.split(l),r=n.length;r>d&&"[Events]"!==n[d];)d++;for(a=o(n[++d]);++d<r&&n[d]&&"["!==n[d][0];)try{u.push(i("subtitle",t(n[d],a)))}catch(c){}return s.data=u,s})}(Popcorn),function(e){function t(e,o,r){for(var s,l=e.firstChild,u=n(e,r),d=[];l;)1===l.nodeType&&("p"===l.nodeName?d.push(a(l,o,u)):"div"===l.nodeName&&(s=i(l.getAttribute("begin")),0>s&&(s=o),d.push.apply(d,t(l,s,u)))),l=l.nextSibling;return d}function n(e,t){var n=e.getAttribute("region");return null!==n?n:t||""}function a(e,t,a){var o={};return o.text=(e.textContent||e.text).replace(s,"").replace(l,"<br />"),o.id=e.getAttribute("xml:id")||e.getAttribute("id"),o.start=i(e.getAttribute("begin"),t),o.end=i(e.getAttribute("end"),t),o.target=n(e,a),o.end<0&&(o.end=i(e.getAttribute("duration"),0),o.end>=0?o.end+=o.start:o.end=Number.MAX_VALUE),{subtitle:o}}function i(t,n){var a;if(!t)return-1;try{return e.util.toSeconds(t)}catch(i){return a=o(t),parseFloat(t.substring(0,a))*r(t.substring(a))+(n||0)}}function o(e){for(var t=e.length-1;t>=0&&e[t]<="9"&&e[t]>="0";)t--;return t}function r(e){return{h:3600,m:60,s:1,ms:.001}[e]||-1}var s=/^[\s]+|[\s]+$/gm,l=/(?:\r\n|\r|\n)/gm;e.parser("parseTTML",function(e){var n,a={title:"",remote:"",data:[]};if(!e.xml||!e.xml.documentElement)return a;if(n=e.xml.documentElement.firstChild,!n)return a;for(;"body"!==n.nodeName;)n=n.nextSibling;return n&&(a.data=t(n,0)),a})}(Popcorn),function(e){e.parser("parseTTXT",function(e){for(var t={title:"",remote:"",data:[]},n=function(e){var t=e.split(":"),n=0;try{return 60*60*parseFloat(t[0],10)+60*parseFloat(t[1],10)+parseFloat(t[2],10)}catch(a){n=0}return n},a=function(e,t){var n={};return n[e]=t,n},i=e.xml.lastChild.lastChild,o=Number.MAX_VALUE,r=[];i;){if(1===i.nodeType&&"TextSample"===i.nodeName){var s={};s.start=n(i.getAttribute("sampleTime")),s.text=i.getAttribute("text"),s.text&&(s.end=o-.001,r.push(a("subtitle",s))),o=s.start}i=i.previousSibling}return t.data=r.reverse(),t})}(Popcorn),function(e){function t(e){var t,n=e.split(":"),a=e.length;if(12!==a&&9!==a)throw"Bad cue";a=n.length-1;try{t=60*parseInt(n[a-1],10)+parseFloat(n[a],10),2===a&&(t+=3600*parseInt(n[0],10))}catch(i){throw"Bad cue"}return t}function n(e,t){var n={};return n[e]=t,n}function a(e){var n,a={},i=/-->/,o=/[\t ]+/;if(!e||-1===e.indexOf("-->"))throw"Bad cue";if(n=e.replace(i," --> ").split(o),n.length<2)throw"Bad cue";return a.id=e,a.start=t(n[0]),a.end=t(n[2]),a}function i(e,t,n){for(;t>n&&!e[n];)n++;return n}function o(e,t,n){for(;t>n&&e[n];)n++;return n}e.parser("parseVTT",function(e){var t,r,s,l={title:"",remote:"",data:[]},u=[],d=0,c=0,p=/(?:\r\n|\r|\n)/gm;if(t=e.text.split(p),c=t.length,0===c||"WEBVTT"!==t[0])return l;for(d++;c>d;){r=[];try{for(d=i(t,c,d),s=a(t[d++]);c>d&&t[d];)r.push(t[d++]);s.text=r.join("<br />"),u.push(n("subtitle",s))}catch(f){d=o(t,c,d)}}return l.data=u,l})}(Popcorn),function(e){e.parser("parseXML","XML",function(t){for(var n={title:"",remote:"",data:[]},a={},i=function(e){var t=e.split(":");return 1===t.length?parseFloat(t[0],10):2===t.length?parseFloat(t[0],10)+parseFloat(t[1]/12,10):3===t.length?parseInt(60*t[0],10)+parseFloat(t[1],10)+parseFloat(t[2]/12,10):4===t.length?parseInt(3600*t[0],10)+parseInt(60*t[1],10)+parseFloat(t[2],10)+parseFloat(t[3]/12,10):void 0},o=function(e){for(var t={},n=0,o=e.length;o>n;n++){var r=e.item(n).nodeName,s=e.item(n).nodeValue,l=a[s];if("in"===r)t.start=i(s);else if("out"===r)t.end=i(s);else if("resourceid"===r)for(var u in l)l.hasOwnProperty(u)&&(t[u]||"id"===u||(t[u]=l[u]));else t[r]=s}return t},r=function(e,t){var n={};return n[e]=t,n},s=function(t,i,l){var u={};e.extend(u,i,o(t.attributes),{text:t.textContent||t.text});var d=t.childNodes;if(d.length<1||1===d.length&&3===d[0].nodeType)l?a[u.id]=u:n.data.push(r(t.nodeName,u));else for(var c=0;c<d.length;c++)1===d[c].nodeType&&s(d[c],u,l)},l=t.documentElement.childNodes,u=0,d=l.length;d>u;u++)1===l[u].nodeType&&("manifest"===l[u].nodeName?s(l[u],{},!0):s(l[u],{},!1));return n})}(Popcorn),function(){var e=!1,t=!1;Popcorn.player("soundcloud",{_canPlayType:function(e,t){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(t)&&"video"!==e.toLowerCase()},_setup:function(n){function a(){e=!0,SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"}),SC.get("/resolve",{url:r.src},function(e){r.width=r.style.width?""+r.offsetWidth:"560",r.height=r.style.height?""+r.offsetHeight:"315",s.scrolling="no",s.frameborder="no",s.id="soundcloud-"+Popcorn.guid(),s.src="http://w.soundcloud.com/player/?url="+e.uri+"&show_artwork=false"+"&buying=false"+"&liking=false"+"&sharing=false",s.width="100%",s.height="100%",n.loadListener=function(){n.widget=o=SC.Widget(s.id),o.bind(SC.Widget.Events.FINISH,function(){r.pause(),r.dispatchEvent("ended")}),o.bind(SC.Widget.Events.PLAY_PROGRESS,function(e){u=e.currentPosition/1e3,r.dispatchEvent("timeupdate")}),o.bind(SC.Widget.Events.PLAY,function(){d=c=!1,r.dispatchEvent("play"),r.dispatchEvent("playing"),r.currentTime=u,m.next()}),o.bind(SC.Widget.Events.PAUSE,function(){d=c=!0,r.dispatchEvent("pause"),m.next()}),o.bind(SC.Widget.Events.READY,function(){o.getDuration(function(e){p=e/1e3,r.style.visibility="visible",r.dispatchEvent("durationchange"),r.readyState=4,r.dispatchEvent("readystatechange"),r.dispatchEvent("loadedmetadata"),r.dispatchEvent("loadeddata"),r.dispatchEvent("canplaythrough"),r.dispatchEvent("load"),!r.paused&&r.play()}),o.getVolume(function(e){l=e/100})})},s.addEventListener("load",n.loadListener,!1),r.appendChild(s)})}function i(){t?!function n(){setTimeout(function(){e?a():n()},100)}():(t=!0,Popcorn.getScript("http://w.soundcloud.com/player/api.js",function(){Popcorn.getScript("http://connect.soundcloud.com/sdk.js",function(){a()})}))}var o,r=this,s=document.createElement("iframe"),l=1,u=0,d=!0,c=!0,p=0,f=!1,m=Popcorn.player.playerQueue();n._container=s,r.style.visibility="hidden",r.play=function(){d=!1,m.add(function(){c?o&&o.play():m.next()})},r.pause=function(){d=!0,m.add(function(){c?m.next():o&&o.pause()})},Object.defineProperties(r,{muted:{set:function(e){e?(o&&o.getVolume(function(e){l=e/100}),o&&o.setVolume(0),f=!0):(o&&o.setVolume(100*l),f=!1),r.dispatchEvent("volumechange")},get:function(){return f}},volume:{set:function(e){o&&o.setVolume(100*e),l=e,r.dispatchEvent("volumechange")},get:function(){return f?0:l}},currentTime:{set:function(e){u=e,o&&o.seekTo(1e3*e),r.dispatchEvent("seeked"),r.dispatchEvent("timeupdate")},get:function(){return u}},duration:{get:function(){return p}},paused:{get:function(){return d}}}),e?a():i()},_teardown:function(e){var t=e.widget,n=SC.Widget.Events,a=e._container;if(a.parentNode,e.destroyed=!0,!t)return a.removeEventListener("load",e.loadEventListener,!1),void 0;for(var i in n)t&&t.unbind(n[i])}})}(),function(){function e(t){for(var n=e.options,a=n.parser[n.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[n.key[o]]=a[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(e,t,a){t&&(i[n.q.name][t]=a)}),i}function t(e,t){return/player.vimeo.com\/video\/\d+/.test(t)||/vimeo.com\/\d+/.test(t)}e.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},Popcorn.player("vimeo",{_canPlayType:t,_setup:function(n){function a(e,t){var n=v.src.split("?")[0],a=JSON.stringify({method:e,value:t});return"//"===n.substr(0,2)&&(n=window.location.protocol+n),v.contentWindow?(v.contentWindow.postMessage(a,n),void 0):(g.unload(),void 0)}function i(e){if("http://player.vimeo.com"===e.origin){var t;try{t=JSON.parse(e.data)}catch(n){console.warn(n)}t.player_id==u&&(t.method&&w[t.method]&&w[t.method](t),t.event&&x[t.event]&&x[t.event](t))}}function o(e){b.error={},Popcorn.extend(b.error,h),b.error.code=e,g.dispatchEvent("error")}function r(){isNaN(b.duration)||(b.readyState=4,g.dispatchEvent("durationchange"),g.dispatchEvent("loadedmetadata"),g.dispatchEvent("loadeddata"),g.dispatchEvent("canplay"),g.dispatchEvent("canplaythrough"))}function s(){c||(c=setInterval(function(){g.dispatchEvent("timeupdate")},f)),d||(d=setInterval(function(){a("getCurrentTime")},m))}function l(){c&&(clearInterval(c),c=0),d&&(clearInterval(d),d=0)}var u,d,c,p,f=250,m=16,h={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},g=this,y={q:[],queue:function(e){this.q.push(e),this.process()},process:function(){if(p)for(;this.q.length;){var e=this.q.shift();e()}}},v=document.createElement("iframe"),b={error:null,src:g.src,NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,networkState:0,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4,readyState:0,seeking:!1,currentTime:0,duration:0/0,paused:!0,ended:!1,autoplay:!1,loop:!1,volume:1,muted:!1,width:0,height:0},E="error networkState readyState seeking duration paused ended";Popcorn.forEach(E.split(" "),function(e){Object.defineProperty(g,e,{get:function(){return b[e]}})}),Object.defineProperties(g,{src:{get:function(){return b.src},set:function(e){b.src=e,g.load()}},currentTime:{get:function(){return b.currentTime},set:function(e){y.queue(function(){a("seekTo",e)}),b.seeking=!0,g.dispatchEvent("seeking")}},autoplay:{get:function(){return b.autoplay},set:function(e){b.autoplay=!!e}},loop:{get:function(){return b.loop},set:function(e){b.loop=!!e,y.queue(function(){a("setLoop",loop)})}},volume:{get:function(){return b.volume},set:function(e){b.volume=e,y.queue(function(){a("setVolume",b.muted?0:b.volume)}),g.dispatchEvent("volumechange")}},muted:{get:function(){return b.muted},set:function(e){b.muted=!!e,y.queue(function(){a("setVolume",b.muted?0:b.volume)}),g.dispatchEvent("volumechange")}},width:{get:function(){return v.width},set:function(e){v.width=e}},height:{get:function(){return v.height},set:function(e){v.height=e}}});var w={getCurrentTime:function(e){b.currentTime=parseFloat(e.value)},getDuration:function(e){b.duration=parseFloat(e.value),r()},getVolume:function(e){b.volume=parseFloat(e.value)}},x={ready:function(){a("addEventListener","loadProgress"),a("addEventListener","playProgress"),a("addEventListener","play"),a("addEventListener","pause"),a("addEventListener","finish"),a("addEventListener","seek"),a("getDuration"),p=!0,y.process(),g.dispatchEvent("loadstart")},loadProgress:function(e){g.dispatchEvent("progress"),b.duration=parseFloat(e.data.duration)},playProgress:function(e){b.currentTime=parseFloat(e.data.seconds)},play:function(){b.seeking&&(b.seeking=!1,g.dispatchEvent("seeked")),b.paused=!1,b.ended=!1,s(),g.dispatchEvent("play")},pause:function(){b.paused=!0,l(),g.dispatchEvent("pause")},finish:function(){b.ended=!0,l(),g.dispatchEvent("ended")},seek:function(e){b.currentTime=parseFloat(e.data.seconds),b.seeking=!1,b.ended=!1,g.dispatchEvent("timeupdate"),g.dispatchEvent("seeked")}};g.load=function(){p=!1,u=Popcorn.guid();var a=e(b.src),i={},r=[],s={api:1,player_id:u};if(!t(g.nodeName,a.source))return o(b.MEDIA_ERR_SRC_NOT_SUPPORTED),void 0;Popcorn.extend(i,n),Popcorn.extend(i,a.queryKey),Popcorn.extend(i,s),a="http://player.vimeo.com/video/"+/\d+$/.exec(a.path)+"?";for(var l in i)i.hasOwnProperty(l)&&r.push(encodeURIComponent(l)+"="+encodeURIComponent(i[l]));a+=r.join("&"),b.loop=!!a.match(/loop=1/),b.autoplay=!!a.match(/autoplay=1/),v.width=g.style.width?g.style.width:500,v.height=g.style.height?g.style.height:281,v.frameBorder=0,v.webkitAllowFullScreen=!0,v.mozAllowFullScreen=!0,v.allowFullScreen=!0,v.src=a,g.appendChild(v)},g.unload=function(){l(),window.removeEventListener("message",i,!1)},g.play=function(){y.queue(function(){a("play")})},g.pause=function(){y.queue(function(){a("pause")})},setTimeout(function(){window.addEventListener("message",i,!1),g.load()},0)},_teardown:function(){this.unload&&this.unload()}})}(),function(e,t){e.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=!0;for(var e=0;e<onYouTubePlayerAPIReady.waiting.length;e++)onYouTubePlayerAPIReady.waiting[e]()},e.YT&&(e.quarantineYT=e.YT,e.YT=null),onYouTubePlayerAPIReady.waiting=[];var n=!1;t.player("youtube",{_canPlayType:function(e,t){return"string"==typeof t&&/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(t)&&"video"!==e.toLowerCase()},_setup:function(a){e.YT||n||(n=!0,t.getScript("//youtube.com/player_api"));var i=this,o=!1,r=document.createElement("div"),s=0,l=!0,u=!1,d=0,c=!1,p=100,f=t.player.playerQueue(),m=function(){t.player.defineProperty(i,"currentTime",{set:function(e){a.destroyed||(u=!0,s=Math.round(100*+e)/100)},get:function(){return s}}),t.player.defineProperty(i,"paused",{get:function(){return l}}),t.player.defineProperty(i,"muted",{set:function(e){return a.destroyed?e:(a.youtubeObject.isMuted()!==e&&(e?a.youtubeObject.mute():a.youtubeObject.unMute(),c=a.youtubeObject.isMuted(),i.dispatchEvent("volumechange")),a.youtubeObject.isMuted())},get:function(){return a.destroyed?0:a.youtubeObject.isMuted()}}),t.player.defineProperty(i,"volume",{set:function(e){return a.destroyed?e:(a.youtubeObject.getVolume()/100!==e&&(a.youtubeObject.setVolume(100*e),p=a.youtubeObject.getVolume(),i.dispatchEvent("volumechange")),a.youtubeObject.getVolume()/100)},get:function(){return a.destroyed?0:a.youtubeObject.getVolume()/100}}),i.play=function(){a.destroyed||(l=!1,f.add(function(){1!==a.youtubeObject.getPlayerState()?(u=!1,a.youtubeObject.playVideo()):f.next()}))},i.pause=function(){a.destroyed||(l=!0,f.add(function(){2!==a.youtubeObject.getPlayerState()?a.youtubeObject.pauseVideo():f.next()}))}};r.id=i.id+t.guid(),a._container=r,i.appendChild(r);var h=function(){var e,t,n,h,g,y=!0,v=function(){a.destroyed||(u?s===a.youtubeObject.getCurrentTime()?(u=!1,i.dispatchEvent("seeked"),i.dispatchEvent("timeupdate")):a.youtubeObject.seekTo(s):(s=a.youtubeObject.getCurrentTime(),i.dispatchEvent("timeupdate")),setTimeout(v,250))},b=function(e){var t=a.youtubeObject.getDuration();isNaN(t)||0===t?setTimeout(function(){b(2*e)},1e3*e):(i.duration=t,i.dispatchEvent("durationchange"),i.dispatchEvent("loadedmetadata"),i.dispatchEvent("loadeddata"),i.readyState=4,v(),i.dispatchEvent("canplaythrough"))};a.controls=0===+a.controls||1===+a.controls?a.controls:1,a.annotations=1===+a.annotations||3===+a.annotations?a.annotations:1,e=/^.*(?:\/|v=)(.{11})/.exec(i.src)[1],t=(i.src.split("?")[1]||"").replace(/v=.{11}/,""),t=t.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(e,t,n){return t=0|t,n=0|n,d=+n+60*t,""}),t=t.replace(/&start=(\d+)?/,function(e,t){return t=0|t,d=t,""}),o=/autoplay=1/.test(t),n=t.split(/[\&\?]/g),h={wmode:"transparent"};for(var E=0;E<n.length;E++)g=n[E].split("="),h[g[0]]=g[1];a.youtubeObject=new YT.Player(r.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:h,videoId:e,events:{onReady:function(){p=i.volume,c=i.muted,w(),l=i.paused,m(),a.youtubeObject.playVideo(),i.currentTime=d},onStateChange:function(e){a.destroyed||-1===e.data||(2===e.data?(l=!0,i.dispatchEvent("pause"),f.next()):1!==e.data||y?0===e.data?i.dispatchEvent("ended"):1===e.data&&y&&(y=!1,(o||!i.paused)&&(l=!1),l&&a.youtubeObject.pauseVideo(),b(.025)):(l=!1,i.dispatchEvent("play"),i.dispatchEvent("playing"),f.next()))},onError:function(e){-1!==[2,100,101,150].indexOf(e.data)&&(i.error={customCode:e.data},i.dispatchEvent("error"))}}});var w=function(){a.destroyed||(c!==a.youtubeObject.isMuted()&&(c=a.youtubeObject.isMuted(),i.dispatchEvent("volumechange")),p!==a.youtubeObject.getVolume()&&(p=a.youtubeObject.getVolume(),i.dispatchEvent("volumechange")),setTimeout(w,250))}};onYouTubePlayerAPIReady.ready?h():onYouTubePlayerAPIReady.waiting.push(h)},_teardown:function(e){e.destroyed=!0;var t=e.youtubeObject;t&&(t.stopVideo(),t.clearVideo&&t.clearVideo()),this.removeChild(document.getElementById(e._container.id))}})}(window,Popcorn),function(e){var t=function(t,n){var a,i=0,o=0;e.forEach(n.classes,function(e,t){for(a=[],"parent"===e?a[0]=document.querySelectorAll("#"+n.target)[0].parentNode:a=document.querySelectorAll("#"+n.target+" "+e),i=0,o=a.length;o>i;i++)a[i].classList.toggle(t)})};e.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(e){e.classes={},e.applyclass=e.applyclass||"";for(var t=e.applyclass.replace(/\s/g,"").split(","),n=[],a=0,i=t.length;i>a;a++)n=t[a].split(":"),n[0]&&(e.classes[n[0]]=n[1]||"")},start:t,end:t})}(Popcorn);