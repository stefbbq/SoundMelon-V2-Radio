.logo
	= image_tag('core/footer_logo.png')
.right 
	%small
		Copyright 2013 SoundMelon Inc.
	.icons
		.icon-32#facebook-icon{href: "#"}
		.icon-32#twitter-icon{href: "#"}
		.icon-32#linkedin-icon{href: "#"}
	%small
		= link_to "Feedback", feedback_form_path, remote: true, id: 'feedback-link'
		- if signed_in?
			Hello #{current_user.first_name + ' ' + current_user.last_name}!
			- if current_user.terms
				= !current_user.is_artist? ? link_to("Music +" , add_media_account_path, remote: true, class: 'hover-link', id: 'add-content') : link_to("Music" , artist_show_path, remote: true, class: 'hover-link', id: 'add-content')
			%a.hover-link#edit-page Settings

		- else
			Find your tune.
			%a.hover-link#learn-more Learn more
			= #link_to('SO WHY NOT REGISTER?', signup_path, remote: true)

	.modal#more-info
		Phasellus luctus malesuada velit, eu pellentesque eros imperdiet a. Donec in sagittis dolor. Proin pretium magna ac lectus pretium, non viverra dolor sagittis. Ut sit amet mauris a massa lacinia porta. Cras tristique urna ipsum. Aenean vehicula condimentum laoreet.

:javascript
	function smartModal(modal, content) {
		//Ajax load into modal if content is not available. modal, content are ids.
		var modalId = '#' + modal;
		var contentId = '#' + content;
		$(modalId).toggle();
		return ( (document.getElementById(modal).style.display == 'none') || ($(modalId + ' ' + contentId).length > 0) )
	}

	$('#feedback-link').click(function() {
		if(smartModal('feedback-board', 'feedback-form')) {
			return false
		}
		else {
			$('#feedback-board .spinner').show();
		}
	});

	$('#learn-more').click(function() {
		$('#more-info').toggle();
	});

	$('#add-content').click(function() {
		if(smartModal('user-add', 'available-uploads')) {
			return false;
		}
		else {
			$('#user-add .spinner').show();
		}

	});

	$('#edit-page').click(function() {
		$('#user-edit').toggle();
	});

	$('document').ready(function() {
		//Add AJAX-loaders
		$(document).ajaxStop(function() {
			$('.spinner').hide();		
		});

		$(document).mouseup(function(e) {
			var container = $('.modal');
			if(!container.is(e.target) && container.has(e.target).length == 0) {
				container.hide();
			}
		});

		var fromCallback = '#{flash[:music_account_callback].to_s}';
		if(fromCallback === 'true') {
			$('#add-content').click();
		}

	});
