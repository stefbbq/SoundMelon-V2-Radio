- user = User.find_by_email(params[:session][:email].downcase)
- if user && user.authenticate(params[:session][:password])
	:ruby
		sign_in user
	:plain
		$('.main_page_div').empty().html("#{escape_javascript( render template: 'users/show' )}");
		$('#footer').empty().html("#{escape_javascript( render partial: 'layouts/footer' )}")
- else
	:plain
		$('#login_messages').empty().html('Invalid email/password.');
	- end
